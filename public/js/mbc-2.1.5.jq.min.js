/**
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Mobile Browser Capture
 * @website http://www.dynamsoft.com
 * @preserve Copyright 2019, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 2.1.4
 * @fileoverview Dynamsoft JavaScript Library for Basic Image Edit
 * More info on MBC: http://www.dynamsoft.com/
 */
/*
 jQuery v3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector | (c) JS Foundation and other contributors | jquery.org/license */
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(h,a,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");h!=Array.prototype&&h!=Object.prototype&&(h[a]=g.value)};$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(h){return $jscomp.SYMBOL_PREFIX+(h||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.iterator;h||(h=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[h]&&$jscomp.defineProperty(Array.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(h){var a=0;return $jscomp.iteratorPrototype(function(){return a<h.length?{done:!1,value:h[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(h){$jscomp.initSymbolIterator();h={next:h};h[$jscomp.global.Symbol.iterator]=function(){return this};return h};$jscomp.findInternal=function(h,a,g){h instanceof String&&(h=String(h));for(var w=h.length,A=0;A<w;A++){var ca=h[A];if(a.call(g,ca,A,h))return{i:A,v:ca}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(h,a,g,w){if(a){g=$jscomp.global;h=h.split(".");for(w=0;w<h.length-1;w++){var A=h[w];A in g||(g[A]={});g=g[A]}h=h[h.length-1];w=g[h];a=a(w);a!=w&&null!=a&&$jscomp.defineProperty(g,h,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6-impl","es3");$jscomp.makeIterator=function(h){$jscomp.initSymbolIterator();var a=h[Symbol.iterator];return a?a.call(h):$jscomp.arrayIterator(h)};
$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(h){function a(){this.batch_=null}if(h&&!$jscomp.FORCE_POLYFILL_PROMISE)return h;a.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};a.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(a){g(a,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var g=0;g<a.length;++g){var h=a[g];delete a[g];try{h()}catch(u){this.asyncThrow_(u)}}}this.batch_=null};a.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var w=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var g=this.createResolveAndReject_();try{a(g.resolve,g.reject)}catch(na){g.reject(na)}};w.prototype.createResolveAndReject_=function(){function a(a){return function(n){h||(h=!0,a.call(g,n))}}var g=this,
h=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};w.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof w)this.settleSameAsPromise_(a);else{var g;a:switch(typeof a){case "object":g=null!=a;break a;case "function":g=!0;break a;default:g=!1}g?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};w.prototype.resolveToNonPromiseObj_=function(a){var g=void 0;try{g=a.then}catch(na){this.reject_(na);return}"function"==
typeof g?this.settleSameAsThenable_(g,a):this.fulfill_(a)};w.prototype.reject_=function(a){this.settle_(2,a)};w.prototype.fulfill_=function(a){this.settle_(1,a)};w.prototype.settle_=function(a,g){if(0!=this.state_)throw Error("Cannot settle("+a+", "+g|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=g;this.executeOnSettledCallbacks_()};w.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,g=0;g<a.length;++g)a[g].call(),
a[g]=null;this.onSettledCallbacks_=null}};var A=new a;w.prototype.settleSameAsPromise_=function(a){var g=this.createResolveAndReject_();a.callWhenSettled_(g.resolve,g.reject)};w.prototype.settleSameAsThenable_=function(a,g){var h=this.createResolveAndReject_();try{a.call(g,h.resolve,h.reject)}catch(u){h.reject(u)}};w.prototype.then=function(a,g){function h(a,g){return"function"==typeof a?function(g){try{u(a(g))}catch(J){n(J)}}:g}var u,n,y=new w(function(a,g){u=a;n=g});this.callWhenSettled_(h(a,u),
h(g,n));return y};w.prototype["catch"]=function(a){return this.then(void 0,a)};w.prototype.callWhenSettled_=function(a,g){function h(){switch(w.state_){case 1:a(w.result_);break;case 2:g(w.result_);break;default:throw Error("Unexpected state: "+w.state_);}}var w=this;null==this.onSettledCallbacks_?A.asyncExecute(h):this.onSettledCallbacks_.push(function(){A.asyncExecute(h)})};w.resolve=function(a){return a instanceof w?a:new w(function(g,h){g(a)})};w.reject=function(a){return new w(function(g,h){h(a)})};
w.race=function(a){return new w(function(g,h){for(var A=$jscomp.makeIterator(a),n=A.next();!n.done;n=A.next())w.resolve(n.value).callWhenSettled_(g,h)})};w.all=function(a){var g=$jscomp.makeIterator(a),h=g.next();return h.done?w.resolve([]):new w(function(a,n){function A(g){return function(h){p[g]=h;u--;0==u&&a(p)}}var p=[],u=0;do p.push(void 0),u++,w.resolve(h.value).callWhenSettled_(A(p.length-1),n),h=g.next();while(!h.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(w.$jscomp$new$AsyncExecutor=function(){return new a});
return w},"es6-impl","es3");$jscomp.polyfill("Math.sign",function(h){return h?h:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(a,g,h){var w=this.length||0;0>g&&(g=Math.max(0,w+g));if(null==h||h>w)h=w;h=Number(h);0>h&&(h=Math.max(0,w+h));for(g=Number(g||0);g<h;g++)this[g]=a;return this}},"es6-impl","es3");
!function(h,a){"object"==typeof module&&"object"==typeof module.exports?module.exports=h.document?a(h,!0):function(g){if(!g.document)throw Error("jQuery requires a window with a document");return a(g)}:a(h)}("undefined"!=typeof window?window:this,function(h,a){function g(b,c){c=c||f;var d=c.createElement("script");d.text=b;c.head.appendChild(d).parentNode.removeChild(d)}function w(b){var c=!!b&&"length"in b&&b.length,q=d.type(b);return"function"!==q&&!d.isWindow(b)&&("array"===q||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function A(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()}function ca(b,c,q){return d.isFunction(c)?d.grep(b,function(b,d){return!!c.call(b,d,b)!==q}):c.nodeType?d.grep(b,function(b){return b===c!==q}):"string"!=typeof c?d.grep(b,function(b){return-1<m.call(c,b)!==q}):$a.test(c)?d.filter(c,b,q):(c=d.filter(c,b),d.grep(b,function(b){return-1<m.call(c,b)!==q&&1===b.nodeType}))}function N(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function na(b){var c=
{};return d.each(b.match(qa)||[],function(b,d){c[d]=!0}),c}function u(b){return b}function n(b){throw b;}function y(b,c,q,a){var x;try{b&&d.isFunction(x=b.promise)?x.call(b).done(c).fail(q):b&&d.isFunction(x=b.then)?x.call(b,c,q):c.apply(void 0,[b].slice(a))}catch(Y){q.apply(void 0,[Y])}}function p(){f.removeEventListener("DOMContentLoaded",p);h.removeEventListener("load",p);d.ready()}function L(){this.expando=d.expando+L.uid++}function F(b,c,d){var q;if(void 0===d&&1===b.nodeType)if(q="data-"+c.replace(ab,
"-$&").toLowerCase(),d=b.getAttribute(q),"string"==typeof d){try{q=d,d="true"===q||"false"!==q&&("null"===q?null:q===+q+""?+q:bb.test(q)?JSON.parse(q):q)}catch(C){}ka.set(b,c,d)}else d=void 0;return d}function J(b,c,q,a){var x,e=1,f=20,l=a?function(){return a.cur()}:function(){return d.css(b,c,"")},k=l(),m=q&&q[3]||(d.cssNumber[c]?"":"px"),g=(d.cssNumber[c]||"px"!==m&&+k)&&wa.exec(d.css(b,c));if(g&&g[3]!==m){m=m||g[3];q=q||[];g=+k||1;do e=e||".5",g/=e,d.style(b,c,g+m);while(e!==(e=l()/k)&&1!==e&&
--f)}return q&&(g=+g||+k||0,x=q[1]?g+(q[1]+1)*q[2]:+q[2],a&&(a.unit=m,a.start=g,a.end=x)),x}function S(b,c){for(var q,a,e=[],f=0,l=b.length;f<l;f++)if(a=b[f],a.style)if(q=a.style.display,c){if("none"===q&&(e[f]=U.get(a,"display")||null,e[f]||(a.style.display="")),""===a.style.display&&Ia(a)){q=f;var k,m=void 0;k=a.ownerDocument;var g=a.nodeName;k=(a=Ja[g])?a:(m=k.body.appendChild(k.createElement(g)),a=d.css(m,"display"),m.parentNode.removeChild(m),"none"===a&&(a="block"),Ja[g]=a,a);e[q]=k}}else"none"!==
q&&(e[f]="none",U.set(a,"display",q));for(f=0;f<l;f++)null!=e[f]&&(b[f].style.display=e[f]);return b}function r(b,c){var q;return q="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[],void 0===c||c&&A(b,c)?d.merge([b],q):q}function K(b,c){for(var d=0,a=b.length;d<a;d++)U.set(b[d],"globalEval",!c||U.get(c[d],"globalEval"))}function O(b,c,q,a,e){for(var x,f,C,l,k=c.createDocumentFragment(),m=[],g=0,h=b.length;g<
h;g++)if(x=b[g],x||0===x)if("object"===d.type(x))d.merge(m,x.nodeType?[x]:x);else if(db.test(x)){f=f||k.appendChild(c.createElement("div"));C=(Ka.exec(x)||["",""])[1].toLowerCase();C=ia[C]||ia._default;f.innerHTML=C[1]+d.htmlPrefilter(x)+C[2];for(C=C[0];C--;)f=f.lastChild;d.merge(m,f.childNodes);f=k.firstChild;f.textContent=""}else m.push(c.createTextNode(x));k.textContent="";for(g=0;x=m[g++];)if(a&&-1<d.inArray(x,a))e&&e.push(x);else if(l=d.contains(x.ownerDocument,x),f=r(k.appendChild(x),"script"),
l&&K(f),q)for(C=0;x=f[C++];)La.test(x.type||"")&&q.push(x);return k}function fa(){return!0}function D(){return!1}function I(){try{return f.activeElement}catch(b){}}function da(b,c,q,a,e,f){var x,C;if("object"==typeof c){"string"!=typeof q&&(a=a||q,q=void 0);for(C in c)da(b,C,q,a,c[C],f);return b}if(null==a&&null==e?(e=q,a=q=void 0):null==e&&("string"==typeof q?(e=a,a=void 0):(e=a,a=q,q=void 0)),!1===e)e=D;else if(!e)return b;return 1===f&&(x=e,e=function(b){return d().off(b),x.apply(this,arguments)},
e.guid=x.guid||(x.guid=d.guid++)),b.each(function(){d.event.add(this,c,e,a,q)})}function z(b,c){return A(b,"table")&&A(11!==c.nodeType?c:c.firstChild,"tr")?d(">tbody",b)[0]||b:b}function t(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function B(b){var c=eb.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function ta(b,c){var q,a,e,f,l,k;if(1===c.nodeType){if(U.hasData(b)&&(q=U.access(b),a=U.set(c,q),k=q.events))for(e in delete a.handle,a.events={},k)for(q=0,a=k[e].length;q<
a;q++)d.event.add(c,e,k[e][q]);ka.hasData(b)&&(f=ka.access(b),l=d.extend({},f),ka.set(c,l))}}function ja(b,c,q,a){c=l.apply([],c);var e,f,x,k,m=0,h=b.length,v=h-1,E=c[0],z=d.isFunction(E);if(z||1<h&&"string"==typeof E&&!P.checkClone&&fb.test(E))return b.each(function(d){var e=b.eq(d);z&&(c[0]=E.call(this,d,e.html()));ja(e,c,q,a)});if(h&&(e=O(c,b[0].ownerDocument,!1,b,a),f=e.firstChild,1===e.childNodes.length&&(e=f),f||a)){f=d.map(r(e,"script"),t);for(x=f.length;m<h;m++)k=e,m!==v&&(k=d.clone(k,!0,
!0),x&&d.merge(f,r(k,"script"))),q.call(b[m],k,m);if(x)for(e=f[f.length-1].ownerDocument,d.map(f,B),m=0;m<x;m++)k=f[m],La.test(k.type||"")&&!U.access(k,"globalEval")&&d.contains(e,k)&&(k.src?d._evalUrl&&d._evalUrl(k.src):g(k.textContent.replace(gb,""),e))}return b}function Ba(b,c,q){for(var a=c?d.filter(c,b):b,e=0;null!=(c=a[e]);e++)q||1!==c.nodeType||d.cleanData(r(c)),c.parentNode&&(q&&d.contains(c.ownerDocument,c)&&K(r(c,"script")),c.parentNode.removeChild(c));return b}function ea(b,c,q){var a,
e,f,k,l=b.style;return q=q||ya(b),q&&(k=q.getPropertyValue(c)||q[c],""!==k||d.contains(b.ownerDocument,b)||(k=d.style(b,c)),!P.pixelMarginRight()&&Ga.test(k)&&Ma.test(c)&&(a=l.width,e=l.minWidth,f=l.maxWidth,l.minWidth=l.maxWidth=l.width=k,k=q.width,l.width=a,l.minWidth=e,l.maxWidth=f)),void 0!==k?k+"":k}function Z(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function Q(b){var c=d.cssProps[b];if(!c){var c=d.cssProps,q;a:if(q=b,!(q in Na)){for(var a=
q[0].toUpperCase()+q.slice(1),e=Oa.length;e--;)if(q=Oa[e]+a,q in Na)break a;q=void 0}c=c[b]=q||b}return c}function ga(b,c,d){return(b=wa.exec(c))?Math.max(0,b[2]-(d||0))+(b[3]||"px"):c}function Ca(b,c,q,a,e){var f=0;for(c=q===(a?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===q&&(f+=d.css(b,q+ra[c],!0,e)),a?("content"===q&&(f-=d.css(b,"padding"+ra[c],!0,e)),"margin"!==q&&(f-=d.css(b,"border"+ra[c]+"Width",!0,e))):(f+=d.css(b,"padding"+ra[c],!0,e),"padding"!==q&&(f+=d.css(b,"border"+ra[c]+
"Width",!0,e)));return f}function aa(b,c,q){var a,e=ya(b),f=ea(b,c,e),k="border-box"===d.css(b,"boxSizing",!1,e);return Ga.test(f)?f:(a=k&&(P.boxSizingReliable()||f===b.style[c]),"auto"===f&&(f=b["offset"+c[0].toUpperCase()+c.slice(1)]),f=parseFloat(f)||0,f+Ca(b,c,q||(k?"border":"content"),a,e)+"px")}function R(b){return(b.match(qa)||[]).join(" ")}function T(b){return b.getAttribute&&b.getAttribute("class")||""}function V(b,c,q,a){var e;if(Array.isArray(c))d.each(c,function(c,d){q||hb.test(b)?a(b,
d):V(b+"["+("object"==typeof d&&null!=d?c:"")+"]",d,q,a)});else if(q||"object"!==d.type(c))a(b,c);else for(e in c)V(b+"["+e+"]",c[e],q,a)}var G=[],f=h.document,e=Object.getPrototypeOf,k=G.slice,l=G.concat,v=G.push,m=G.indexOf,M={},E=M.toString,oa=M.hasOwnProperty,H=oa.toString,la=H.call(Object),P={},d=function(b,c){return new d.fn.init(b,c)},za=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,W=/^-ms-/,pa=/-([a-z])/g,X=function(b,c){return c.toUpperCase()};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();
$jscomp.initSymbol();$jscomp.initSymbolIterator();d.fn=d.prototype={jquery:"3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",constructor:d,length:0,toArray:function(){return k.call(this)},get:function(b){return null==b?k.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=d.merge(this.constructor(),b);return b.prevObject=
this,b},each:function(b){return d.each(this,b)},map:function(b){return this.pushStack(d.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(k.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:v,sort:G.sort,splice:G.splice};d.extend=d.fn.extend=function(){var b,
c,q,a,e,f,k=arguments[0]||{},l=1,m=arguments.length,g=!1;"boolean"==typeof k&&(g=k,k=arguments[l]||{},l++);"object"==typeof k||d.isFunction(k)||(k={});for(l===m&&(k=this,l--);l<m;l++)if(null!=(b=arguments[l]))for(c in b)q=k[c],a=b[c],k!==a&&(g&&a&&(d.isPlainObject(a)||(e=Array.isArray(a)))?(e?(e=!1,f=q&&Array.isArray(q)?q:[]):f=q&&d.isPlainObject(q)?q:{},k[c]=d.extend(g,f,a)):void 0!==a&&(k[c]=a));return k};d.extend({expando:"jQuery"+("3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector"+
Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===d.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=d.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==E.call(b))&&(!(c=e(b))||(d=oa.call(c,"constructor")&&c.constructor,"function"==typeof d&&H.call(d)===la))},isEmptyObject:function(b){for(var c in b)return!1;
return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?M[E.call(b)]||"object":typeof b},globalEval:function(b){g(b)},camelCase:function(b){return b.replace(W,"ms-").replace(pa,X)},each:function(b,c){var d,a=0;if(w(b))for(d=b.length;a<d&&!1!==c.call(b[a],a,b[a]);a++);else for(a in b)if(!1===c.call(b[a],a,b[a]))break;return b},trim:function(b){return null==b?"":(b+"").replace(za,"")},makeArray:function(b,c){var a=c||[];return null!=b&&(w(Object(b))?d.merge(a,"string"==
typeof b?[b]:b):v.call(a,b)),a},inArray:function(b,c,d){return null==c?-1:m.call(c,b,d)},merge:function(b,c){for(var d=+c.length,a=0,e=b.length;a<d;a++)b[e++]=c[a];return b.length=e,b},grep:function(b,c,d){for(var a=[],q=0,e=b.length,f=!d;q<e;q++)d=!c(b[q],q),d!==f&&a.push(b[q]);return a},map:function(b,c,d){var a,q,e=0,f=[];if(w(b))for(a=b.length;e<a;e++)q=c(b[e],e,d),null!=q&&f.push(q);else for(e in b)q=c(b[e],e,d),null!=q&&f.push(q);return l.apply([],f)},guid:1,proxy:function(b,c){var a,e,f;if("string"==
typeof c&&(a=b[c],c=b,b=a),d.isFunction(b))return e=k.call(arguments,2),f=function(){return b.apply(c||this,e.concat(k.call(arguments)))},f.guid=b.guid=b.guid||d.guid++,f},now:Date.now,support:P});"function"==typeof Symbol&&(d.fn[Symbol.iterator]=G[Symbol.iterator]);d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,c){M["[object "+c+"]"]=c.toLowerCase()});var ma=function(b){function c(b,c,d,a){var q,e,f,k,l,ba=c&&c.ownerDocument,x=c?c.nodeType:9;if(d=
d||[],"string"!=typeof b||!b||1!==x&&9!==x&&11!==x)return d;if(!a&&((c?c.ownerDocument||c:pa)!==X&&P(c),c=c||X,O)){if(11!==x&&(k=qa.exec(b)))if(q=k[1])if(9===x){if(!(e=c.getElementById(q)))return d;if(e.id===q)return d.push(e),d}else{if(ba&&(e=ba.getElementById(q))&&ea(c,e)&&e.id===q)return d.push(e),d}else{if(k[2])return ma.apply(d,c.getElementsByTagName(b)),d;if((q=k[3])&&H.getElementsByClassName&&c.getElementsByClassName)return ma.apply(d,c.getElementsByClassName(q)),d}if(!(!H.qsa||F[b+" "]||D&&
D.test(b))){if(1!==x)ba=c,l=b;else if("object"!==c.nodeName.toLowerCase()){(f=c.getAttribute("id"))?f=f.replace(ra,va):c.setAttribute("id",f=u);e=ta(b);for(q=e.length;q--;)e[q]="#"+f+" "+z(e[q]);l=e.join(",");ba=Aa.test(b)&&v(c.parentNode)||c}if(l)try{return ma.apply(d,ba.querySelectorAll(l)),d}catch(Bb){}finally{f===u&&c.removeAttribute("id")}}}return oa(b.replace(ga,"$1"),c,d,a)}function d(){function b(d,a){return c.push(d+" ")>W.cacheLength&&delete b[c.shift()],b[d+" "]=a}var c=[];return b}function a(b){return b[u]=
!0,b}function e(b){var c=X.createElement("fieldset");try{return!!b(c)}catch(zb){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function f(b,c){for(var d=b.split("|"),a=d.length;a--;)W.attrHandle[d[a]]=c}function k(b,c){var d=c&&b,a=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(a)return a;if(d)for(;d=d.nextSibling;)if(d===c)return-1;return b?1:-1}function l(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}}function m(b){return function(c){var d=
c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}}function g(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&ya(c)===b:c.disabled===b:"label"in c&&c.disabled===b}}function h(b){return a(function(c){return c=+c,a(function(d,a){for(var q,e=b([],d.length,c),f=e.length;f--;)d[q=e[f]]&&(d[q]=!(a[q]=d[q]))})})}function v(b){return b&&"undefined"!=typeof b.getElementsByTagName&&
b}function E(){}function z(b){for(var c=0,d=b.length,a="";c<d;c++)a+=b[c].value;return a}function t(b,c,d){var a=c.dir,q=c.next,e=q||a,f=d&&"parentNode"===e,k=Z++;return c.first?function(c,d,q){for(;c=c[a];)if(1===c.nodeType||f)return b(c,d,q);return!1}:function(c,d,l){var x,ba,m,g=[da,k];if(l)for(;c=c[a];){if((1===c.nodeType||f)&&b(c,d,l))return!0}else for(;c=c[a];)if(1===c.nodeType||f)if(m=c[u]||(c[u]={}),ba=m[c.uniqueID]||(m[c.uniqueID]={}),q&&q===c.nodeName.toLowerCase())c=c[a]||c;else{if((x=
ba[e])&&x[0]===da&&x[1]===k)return g[2]=x[2];if(ba[e]=g,g[2]=b(c,d,l))return!0}return!1}}function M(b){return 1<b.length?function(c,d,a){for(var q=b.length;q--;)if(!b[q](c,d,a))return!1;return!0}:b[0]}function za(b,c,d,a,q){for(var e,f=[],k=0,l=b.length,x=null!=c;k<l;k++)(e=b[k])&&(d&&!d(e,a,q)||(f.push(e),x&&c.push(k)));return f}function B(b,d,q,e,f,k){return e&&!e[u]&&(e=B(e)),f&&!f[u]&&(f=B(f,k)),a(function(a,k,l,x){var ba,m,g=[],C=[],h=k.length,v;if(!(v=a)){v=d||"*";for(var Y=l.nodeType?[l]:l,
E=[],z=0,t=Y.length;z<t;z++)c(v,Y[z],E);v=E}v=!b||!a&&d?v:za(v,g,b,l,x);Y=q?f||(a?b:h||e)?[]:k:v;if(q&&q(v,Y,l,x),e)for(ba=za(Y,C),e(ba,[],l,x),l=ba.length;l--;)(m=ba[l])&&(Y[C[l]]=!(v[C[l]]=m));if(a){if(f||b){if(f){ba=[];for(l=Y.length;l--;)(m=Y[l])&&ba.push(v[l]=m);f(null,Y=[],ba,x)}for(l=Y.length;l--;)(m=Y[l])&&-1<(ba=f?R(a,m):g[l])&&(a[ba]=!(k[ba]=m))}}else Y=za(Y===k?Y.splice(h,Y.length):Y),f?f(null,k,Y,x):ma.apply(k,Y)})}function V(b){var c,d,a,q=b.length,e=W.relative[b[0].type];d=e||W.relative[" "];
for(var f=e?1:0,k=t(function(b){return b===c},d,!0),l=t(function(b){return-1<R(c,b)},d,!0),x=[function(b,d,a){b=!e&&(a||d!==ja)||((c=d).nodeType?k(b,d,a):l(b,d,a));return c=null,b}];f<q;f++)if(d=W.relative[b[f].type])x=[t(M(x),d)];else{if(d=W.filter[b[f].type].apply(null,b[f].matches),d[u]){for(a=++f;a<q&&!W.relative[b[a].type];a++);return B(1<f&&M(x),1<f&&z(b.slice(0,f-1).concat({value:" "===b[f-2].type?"*":""})).replace(ga,"$1"),d,f<a&&V(b.slice(f,a)),a<q&&V(b=b.slice(a)),a<q&&z(b))}x.push(d)}return M(x)}
function G(b,d){var q=0<d.length,e=0<b.length,f=function(a,f,k,l,x){var m,ba,g,C=0,h="0",Y=a&&[],v=[],z=ja,E=a||e&&W.find.TAG("*",x),t=da+=null==z?1:Math.random()||.1,M=E.length;for(x&&(ja=f===X||f||x);h!==M&&null!=(m=E[h]);h++){if(e&&m){ba=0;for(f||m.ownerDocument===X||(P(m),k=!O);g=b[ba++];)if(g(m,f||X,k)){l.push(m);break}x&&(da=t)}q&&((m=!g&&m)&&C--,a&&Y.push(m))}if(C+=h,q&&h!==C){for(ba=0;g=d[ba++];)g(Y,v,f,k);if(a){if(0<C)for(;h--;)Y[h]||v[h]||(v[h]=ua.call(l));v=za(v)}ma.apply(l,v);x&&!a&&0<
v.length&&1<C+d.length&&c.uniqueSort(l)}return x&&(da=t,ja=z),Y};return q?a(f):f}var r,H,W,n,w,ta,la,oa,ja,K,p,P,X,I,O,D,y,A,ea,u="sizzle"+1*new Date,pa=b.document,da=0,Z=0,Ba=d(),fa=d(),F=d(),J=function(b,c){return b===c&&(p=!0),0},L={}.hasOwnProperty,Q=[],ua=Q.pop,T=Q.push,ma=Q.push,N=Q.slice,R=function(b,c){for(var d=0,a=b.length;d<a;d++)if(b[d]===c)return d;return-1},U=RegExp("[\\x20\\t\\r\\n\\f]+","g"),ga=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Ca=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
aa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Da=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),S=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ca=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,xa={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ka=/^(?:input|select|textarea|button)$/i,na=/^h\d$/i,ia=
/^[^{]+\{\s*\[native \w/,qa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Aa=/[+~]/,ha=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),sa=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},ra=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,va=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},wa=function(){P()},ya=t(function(b){return!0===
b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{ma.apply(Q=N.call(pa.childNodes),pa.childNodes),Q[pa.childNodes.length].nodeType}catch(ba){ma={apply:Q.length?function(b,c){T.apply(b,N.call(c))}:function(b,c){for(var d=b.length,a=0;b[d++]=c[a++];);b.length=d-1}}}H=c.support={};w=c.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};P=c.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:pa;return b!==X&&9===b.nodeType&&b.documentElement?
(X=b,I=X.documentElement,O=!w(X),pa!==X&&(d=X.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",wa,!1):d.attachEvent&&d.attachEvent("onunload",wa)),H.attributes=e(function(b){return b.className="i",!b.getAttribute("className")}),H.getElementsByTagName=e(function(b){return b.appendChild(X.createComment("")),!b.getElementsByTagName("*").length}),H.getElementsByClassName=ia.test(X.getElementsByClassName),H.getById=e(function(b){return I.appendChild(b).id=u,!X.getElementsByName||
!X.getElementsByName(u).length}),H.getById?(W.filter.ID=function(b){var c=b.replace(ha,sa);return function(b){return b.getAttribute("id")===c}},W.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&O){var d=c.getElementById(b);return d?[d]:[]}}):(W.filter.ID=function(b){var c=b.replace(ha,sa);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},W.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&O){var d,a,q,e=c.getElementById(b);
if(e){if(d=e.getAttributeNode("id"),d&&d.value===b)return[e];q=c.getElementsByName(b);for(a=0;e=q[a++];)if(d=e.getAttributeNode("id"),d&&d.value===b)return[e]}return[]}}),W.find.TAG=H.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):H.qsa?c.querySelectorAll(b):void 0}:function(b,c){var d,a=[],q=0,e=c.getElementsByTagName(b);if("*"===b){for(;d=e[q++];)1===d.nodeType&&a.push(d);return a}return e},W.find.CLASS=H.getElementsByClassName&&function(b,
c){if("undefined"!=typeof c.getElementsByClassName&&O)return c.getElementsByClassName(b)},y=[],D=[],(H.qsa=ia.test(X.querySelectorAll))&&(e(function(b){I.appendChild(b).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||D.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+u+"-]").length||D.push("~=");b.querySelectorAll(":checked").length||D.push(":checked");b.querySelectorAll("a#"+u+"+*").length||D.push(".#.+[+~]")}),e(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=X.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&D.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
D.push(":enabled",":disabled");I.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled");b.querySelectorAll("*,:x");D.push(",.*:")})),(H.matchesSelector=ia.test(A=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(b){H.disconnectedMatch=A.call(b,"*");A.call(b,"[s!='']:x");y.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
D=D.length&&new RegExp(D.join("|")),y=y.length&&new RegExp(y.join("|")),c=ia.test(I.compareDocumentPosition),ea=c||ia.test(I.contains)?function(b,c){var d=9===b.nodeType?b.documentElement:b,a=c&&c.parentNode;return b===a||!(!a||1!==a.nodeType||!(d.contains?d.contains(a):b.compareDocumentPosition&&16&b.compareDocumentPosition(a)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},J=c?function(b,c){if(b===c)return p=!0,0;var d=!b.compareDocumentPosition-!c.compareDocumentPosition;
return d?d:(d=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&d||!H.sortDetached&&c.compareDocumentPosition(b)===d?b===X||b.ownerDocument===pa&&ea(pa,b)?-1:c===X||c.ownerDocument===pa&&ea(pa,c)?1:K?R(K,b)-R(K,c):0:4&d?-1:1)}:function(b,c){if(b===c)return p=!0,0;var d,a=0;d=b.parentNode;var q=c.parentNode,e=[b],f=[c];if(!d||!q)return b===X?-1:c===X?1:d?-1:q?1:K?R(K,b)-R(K,c):0;if(d===q)return k(b,c);for(d=b;d=d.parentNode;)e.unshift(d);for(d=c;d=d.parentNode;)f.unshift(d);
for(;e[a]===f[a];)a++;return a?k(e[a],f[a]):e[a]===pa?-1:f[a]===pa?1:0},X):X};c.matches=function(b,d){return c(b,null,null,d)};c.matchesSelector=function(b,d){if((b.ownerDocument||b)!==X&&P(b),d=d.replace(Da,"='$1']"),!(!H.matchesSelector||!O||F[d+" "]||y&&y.test(d)||D&&D.test(d)))try{var a=A.call(b,d);if(a||H.disconnectedMatch||b.document&&11!==b.document.nodeType)return a}catch(Ab){}return 0<c(d,X,null,[b]).length};c.contains=function(b,c){return(b.ownerDocument||b)!==X&&P(b),ea(b,c)};c.attr=function(b,
c){(b.ownerDocument||b)!==X&&P(b);var d=W.attrHandle[c.toLowerCase()],d=d&&L.call(W.attrHandle,c.toLowerCase())?d(b,c,!O):void 0;return void 0!==d?d:H.attributes||!O?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};c.escape=function(b){return(b+"").replace(ra,va)};c.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};c.uniqueSort=function(b){var c,d=[],a=0,q=0;if(p=!H.detectDuplicates,K=!H.sortStable&&b.slice(0),b.sort(J),p){for(;c=b[q++];)c===b[q]&&
(a=d.push(q));for(;a--;)b.splice(d[a],1)}return K=null,b};n=c.getText=function(b){var c,d="",a=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=n(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[a++];)d+=n(c);return d};W=c.selectors={cacheLength:50,createPseudo:a,match:xa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(b){return b[1]=b[1].replace(ha,sa),b[3]=(b[3]||b[4]||b[5]||"").replace(ha,sa),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||c.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&c.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return xa.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&S.test(d)&&(c=ta(d,!0))&&(c=d.indexOf(")",
d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(ha,sa).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=Ba[b+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),Ba(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,
d,a){return function(q){q=c.attr(q,b);return null==q?"!="===d:!d||(q+="","="===d?q===a:"!="===d?q!==a:"^="===d?a&&0===q.indexOf(a):"*="===d?a&&-1<q.indexOf(a):"$="===d?a&&q.slice(-a.length)===a:"~="===d?-1<(" "+q.replace(U," ")+" ").indexOf(a):"|="===d&&(q===a||q.slice(0,a.length+1)===a+"-"))}},CHILD:function(b,c,d,a,q){var e="nth"!==b.slice(0,3),f="last"!==b.slice(-4),k="of-type"===c;return 1===a&&0===q?function(b){return!!b.parentNode}:function(c,d,l){var x,m,g,C,h,v;d=e!==f?"nextSibling":"previousSibling";
var Y=c.parentNode,z=k&&c.nodeName.toLowerCase();l=!l&&!k;var E=!1;if(Y){if(e){for(;d;){for(C=c;C=C[d];)if(k?C.nodeName.toLowerCase()===z:1===C.nodeType)return!1;v=d="only"===b&&!v&&"nextSibling"}return!0}if(v=[f?Y.firstChild:Y.lastChild],f&&l)for(C=Y,g=C[u]||(C[u]={}),m=g[C.uniqueID]||(g[C.uniqueID]={}),x=m[b]||[],E=(h=x[0]===da&&x[1])&&x[2],C=h&&Y.childNodes[h];C=++h&&C&&C[d]||(E=h=0)||v.pop();){if(1===C.nodeType&&++E&&C===c){m[b]=[da,h,E];break}}else if(l&&(C=c,g=C[u]||(C[u]={}),m=g[C.uniqueID]||
(g[C.uniqueID]={}),x=m[b]||[],h=x[0]===da&&x[1],E=h),!1===E)for(;(C=++h&&C&&C[d]||(E=h=0)||v.pop())&&((k?C.nodeName.toLowerCase()!==z:1!==C.nodeType)||!++E||(l&&(g=C[u]||(C[u]={}),m=g[C.uniqueID]||(g[C.uniqueID]={}),m[b]=[da,E]),C!==c)););return E-=q,E===a||0===E%a&&0<=E/a}}},PSEUDO:function(b,d){var q,e=W.pseudos[b]||W.setFilters[b.toLowerCase()]||c.error("unsupported pseudo: "+b);return e[u]?e(d):1<e.length?(q=[b,b,"",d],W.setFilters.hasOwnProperty(b.toLowerCase())?a(function(b,c){for(var a,q=e(b,
d),f=q.length;f--;)a=R(b,q[f]),b[a]=!(c[a]=q[f])}):function(b){return e(b,0,q)}):e}},pseudos:{not:a(function(b){var c=[],d=[],q=la(b.replace(ga,"$1"));return q[u]?a(function(b,c,d,a){var e;d=q(b,null,a,[]);for(a=b.length;a--;)(e=d[a])&&(b[a]=!(c[a]=e))}):function(b,a,e){return c[0]=b,q(c,null,e,d),c[0]=null,!d.pop()}}),has:a(function(b){return function(d){return 0<c(b,d).length}}),contains:a(function(b){return b=b.replace(ha,sa),function(c){return-1<(c.textContent||c.innerText||n(c)).indexOf(b)}}),
lang:a(function(b){return ca.test(b||"")||c.error("unsupported lang: "+b),b=b.replace(ha,sa).toLowerCase(),function(c){var d;do if(d=O?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var d=b.location&&b.location.hash;return d&&d.slice(1)===c.id},root:function(b){return b===I},focus:function(b){return b===X.activeElement&&(!X.hasFocus||X.hasFocus())&&!!(b.type||b.href||
~b.tabIndex)},enabled:g(!1),disabled:g(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!W.pseudos.empty(b)},header:function(b){return na.test(b.nodeName)},input:function(b){return ka.test(b.nodeName)},button:function(b){var c=b.nodeName.toLowerCase();
return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:h(function(){return[0]}),last:h(function(b,c){return[c-1]}),eq:h(function(b,c,d){return[0>d?d+c:d]}),even:h(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:h(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:h(function(b,c,d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:h(function(b,
c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};W.pseudos.nth=W.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})W.pseudos[r]=l(r);for(r in{submit:!0,reset:!0})W.pseudos[r]=m(r);E.prototype=W.filters=W.pseudos;W.setFilters=new E;ta=c.tokenize=function(b,d){var a,q,e,f,k,l,x;if(k=fa[b+" "])return d?0:k.slice(0);k=b;l=[];for(x=W.preFilter;k;){a&&!(q=Ca.exec(k))||(q&&(k=k.slice(q[0].length)||k),l.push(e=[]));a=!1;(q=aa.exec(k))&&(a=q.shift(),e.push({value:a,type:q[0].replace(ga,
" ")}),k=k.slice(a.length));for(f in W.filter)!(q=xa[f].exec(k))||x[f]&&!(q=x[f](q))||(a=q.shift(),e.push({value:a,type:f,matches:q}),k=k.slice(a.length));if(!a)break}return d?k.length:k?c.error(b):fa(b,l).slice(0)};return la=c.compile=function(b,c){var d,a=[],q=[],e=F[b+" "];if(!e){c||(c=ta(b));for(d=c.length;d--;)e=V(c[d]),e[u]?a.push(e):q.push(e);e=F(b,G(q,a));e.selector=b}return e},oa=c.select=function(b,c,d,a){var q,e,f,k,l,x="function"==typeof b&&b,C=!a&&ta(b=x.selector||b);if(d=d||[],1===C.length){if(e=
C[0]=C[0].slice(0),2<e.length&&"ID"===(f=e[0]).type&&9===c.nodeType&&O&&W.relative[e[1].type]){if(c=(W.find.ID(f.matches[0].replace(ha,sa),c)||[])[0],!c)return d;x&&(c=c.parentNode);b=b.slice(e.shift().value.length)}for(q=xa.needsContext.test(b)?0:e.length;q--&&(f=e[q],!W.relative[k=f.type]);)if((l=W.find[k])&&(a=l(f.matches[0].replace(ha,sa),Aa.test(e[0].type)&&v(c.parentNode)||c))){if(e.splice(q,1),b=a.length&&z(e),!b)return ma.apply(d,a),d;break}}return(x||la(b,C))(a,c,!O,d,!c||Aa.test(b)&&v(c.parentNode)||
c),d},H.sortStable=u.split("").sort(J).join("")===u,H.detectDuplicates=!!p,P(),H.sortDetached=e(function(b){return 1&b.compareDocumentPosition(X.createElement("fieldset"))}),e(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||f("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,"type"===c.toLowerCase()?1:2)}),H.attributes&&e(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||
f("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),e(function(b){return null==b.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var a;if(!d)return!0===b[c]?c.toLowerCase():(a=b.getAttributeNode(c))&&a.specified?a.value:null}),c}(h);d.find=ma;d.expr=ma.selectors;d.expr[":"]=d.expr.pseudos;d.uniqueSort=d.unique=ma.uniqueSort;d.text=ma.getText;
d.isXMLDoc=ma.isXML;d.contains=ma.contains;d.escapeSelector=ma.escape;var ua=function(b,c,a){for(var q=[],e=void 0!==a;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(e&&d(b).is(a))break;q.push(b)}return q},xa=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},Da=d.expr.match.needsContext,Aa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,$a=/^.[^:#\[\.,]*$/;d.filter=function(b,c,a){var q=c[0];return a&&(b=":not("+b+")"),1===c.length&&1===q.nodeType?
d.find.matchesSelector(q,b)?[q]:[]:d.find.matches(b,d.grep(c,function(b){return 1===b.nodeType}))};d.fn.extend({find:function(b){var c,a,e=this.length,f=this;if("string"!=typeof b)return this.pushStack(d(b).filter(function(){for(c=0;c<e;c++)if(d.contains(f[c],this))return!0}));a=this.pushStack([]);for(c=0;c<e;c++)d.find(b,f[c],a);return 1<e?d.uniqueSort(a):a},filter:function(b){return this.pushStack(ca(this,b||[],!1))},not:function(b){return this.pushStack(ca(this,b||[],!0))},is:function(b){return!!ca(this,
"string"==typeof b&&Da.test(b)?d(b):b||[],!1).length}});var Qa,ib=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(d.fn.init=function(b,c,a){var q,e;if(!b)return this;if(a=a||Qa,"string"==typeof b){if(q="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:ib.exec(b),!q||!q[1]&&c)return!c||c.jquery?(c||a).find(b):this.constructor(c).find(b);if(q[1]){if(c=c instanceof d?c[0]:c,d.merge(this,d.parseHTML(q[1],c&&c.nodeType?c.ownerDocument||c:f,!0)),Aa.test(q[1])&&d.isPlainObject(c))for(q in c)d.isFunction(this[q])?
this[q](c[q]):this.attr(q,c[q]);return this}return e=f.getElementById(q[2]),e&&(this[0]=e,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):d.isFunction(b)?void 0!==a.ready?a.ready(b):b(d):d.makeArray(b,this)}).prototype=d.fn;Qa=d(f);var jb=/^(?:parents|prev(?:Until|All))/,kb={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(b){var c=d(b,this),a=c.length;return this.filter(function(){for(var b=0;b<a;b++)if(d.contains(this,c[b]))return!0})},closest:function(b,c){var a,
e=0,f=this.length,k=[],l="string"!=typeof b&&d(b);if(!Da.test(b))for(;e<f;e++)for(a=this[e];a&&a!==c;a=a.parentNode)if(11>a.nodeType&&(l?-1<l.index(a):1===a.nodeType&&d.find.matchesSelector(a,b))){k.push(a);break}return this.pushStack(1<k.length?d.uniqueSort(k):k)},index:function(b){return b?"string"==typeof b?m.call(d(b),this[0]):m.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(b,c))))},
addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});d.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return ua(b,"parentNode")},parentsUntil:function(b,c,d){return ua(b,"parentNode",d)},next:function(b){return N(b,"nextSibling")},prev:function(b){return N(b,"previousSibling")},nextAll:function(b){return ua(b,"nextSibling")},prevAll:function(b){return ua(b,"previousSibling")},nextUntil:function(b,c,d){return ua(b,"nextSibling",
d)},prevUntil:function(b,c,d){return ua(b,"previousSibling",d)},siblings:function(b){return xa((b.parentNode||{}).firstChild,b)},children:function(b){return xa(b.firstChild)},contents:function(b){return A(b,"iframe")?b.contentDocument:(A(b,"template")&&(b=b.content||b),d.merge([],b.childNodes))}},function(b,c){d.fn[b]=function(a,e){var q=d.map(this,c,a);return"Until"!==b.slice(-5)&&(e=a),e&&"string"==typeof e&&(q=d.filter(e,q)),1<this.length&&(kb[b]||d.uniqueSort(q),jb.test(b)&&q.reverse()),this.pushStack(q)}});
var qa=/[^\x20\t\r\n\f]+/g;d.Callbacks=function(b){b="string"==typeof b?na(b):d.extend({},b);var c,a,e,f,k=[],l=[],m=-1,g=function(){f=f||b.once;for(e=c=!0;l.length;m=-1)for(a=l.shift();++m<k.length;)!1===k[m].apply(a[0],a[1])&&b.stopOnFalse&&(m=k.length,a=!1);b.memory||(a=!1);c=!1;f&&(k=a?[]:"")},h={add:function(){return k&&(a&&!c&&(m=k.length-1,l.push(a)),function cb(c){d.each(c,function(c,a){d.isFunction(a)?b.unique&&h.has(a)||k.push(a):a&&a.length&&"string"!==d.type(a)&&cb(a)})}(arguments),a&&
!c&&g()),this},remove:function(){return d.each(arguments,function(b,c){for(var a;-1<(a=d.inArray(c,k,a));)k.splice(a,1),a<=m&&m--}),this},has:function(b){return b?-1<d.inArray(b,k):0<k.length},empty:function(){return k&&(k=[]),this},disable:function(){return f=l=[],k=a="",this},disabled:function(){return!k},lock:function(){return f=l=[],a||c||(k=a=""),this},locked:function(){return!!f},fireWith:function(b,d){return f||(d=d||[],d=[b,d.slice?d.slice():d],l.push(d),c||g()),this},fire:function(){return h.fireWith(this,
arguments),this},fired:function(){return!!e}};return h};d.extend({Deferred:function(b){var c=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],a="pending",e={state:function(){return a},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(b){return e.then(null,b)},pipe:function(){var b=
arguments;return d.Deferred(function(a){d.each(c,function(c,e){var q=d.isFunction(b[e[4]])&&b[e[4]];f[e[1]](function(){var b=q&&q.apply(this,arguments);b&&d.isFunction(b.promise)?b.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,q?[b]:arguments)})});b=null}).promise()},then:function(b,a,e){function q(b,c,a,e){return function(){var k=this,l=arguments,x=function(){var x,m;if(!(b<f)){if(x=a.apply(k,l),x===c.promise())throw new TypeError("Thenable self-resolution");m=x&&
("object"==typeof x||"function"==typeof x)&&x.then;d.isFunction(m)?e?m.call(x,q(f,c,u,e),q(f,c,n,e)):(f++,m.call(x,q(f,c,u,e),q(f,c,n,e),q(f,c,u,c.notifyWith))):(a!==u&&(k=void 0,l=[x]),(e||c.resolveWith)(k,l))}},m=e?x:function(){try{x()}catch(Pa){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Pa,m.stackTrace),b+1>=f&&(a!==n&&(k=void 0,l=[Pa]),c.rejectWith(k,l))}};b?m():(d.Deferred.getStackHook&&(m.stackTrace=d.Deferred.getStackHook()),h.setTimeout(m))}}var f=0;return d.Deferred(function(f){c[0][3].add(q(0,
f,d.isFunction(e)?e:u,f.notifyWith));c[1][3].add(q(0,f,d.isFunction(b)?b:u));c[2][3].add(q(0,f,d.isFunction(a)?a:n))}).promise()},promise:function(b){return null!=b?d.extend(b,e):e}},f={};return d.each(c,function(b,d){var q=d[2],k=d[5];e[d[1]]=q.add;k&&q.add(function(){a=k},c[3-b][2].disable,c[0][2].lock);q.add(d[3].fire);f[d[0]]=function(){return f[d[0]+"With"](this===f?void 0:this,arguments),this};f[d[0]+"With"]=q.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(b){var c=arguments.length,
a=c,e=Array(a),f=k.call(arguments),l=d.Deferred(),m=function(b){return function(d){e[b]=this;f[b]=1<arguments.length?k.call(arguments):d;--c||l.resolveWith(e,f)}};if(1>=c&&(y(b,l.done(m(a)).resolve,l.reject,!c),"pending"===l.state()||d.isFunction(f[a]&&f[a].then)))return l.then();for(;a--;)y(f[a],m(a),l.reject);return l.promise()}});var lb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(b,c){h.console&&h.console.warn&&b&&lb.test(b.name)&&h.console.warn("jQuery.Deferred exception: "+
b.message,b.stack,c)};d.readyException=function(b){h.setTimeout(function(){throw b;})};var Ha=d.Deferred();d.fn.ready=function(b){return Ha.then(b)["catch"](function(b){d.readyException(b)}),this};d.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--d.readyWait:d.isReady)||(d.isReady=!0,!0!==b&&0<--d.readyWait||Ha.resolveWith(f,[d]))}});d.ready.then=Ha.then;"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?h.setTimeout(d.ready):(f.addEventListener("DOMContentLoaded",
p),h.addEventListener("load",p));var ha=function(b,c,a,e,f,k,l){var q=0,x=b.length,m=null==a;if("object"===d.type(a))for(q in f=!0,a)ha(b,c,q,a[q],!0,k,l);else if(void 0!==e&&(f=!0,d.isFunction(e)||(l=!0),m&&(l?(c.call(b,e),c=null):(m=c,c=function(b,c,a){return m.call(d(b),a)})),c))for(;q<x;q++)c(b[q],a,l?e:e.call(b[q],q,c(b[q],a)));return f?b:m?c.call(b):x?c(b[0],a):k},Ea=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};L.uid=1;L.prototype={cache:function(b){var c=b[this.expando];
return c||(c={},Ea(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,a){var e;b=this.cache(b);if("string"==typeof c)b[d.camelCase(c)]=a;else for(e in c)b[d.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===c?this.cache(b):b[this.expando]&&b[this.expando][d.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var a,
e=b[this.expando];if(void 0!==e){if(void 0!==c)for(Array.isArray(c)?c=c.map(d.camelCase):(c=d.camelCase(c),c=c in e?[c]:c.match(qa)||[]),a=c.length;a--;)delete e[c[a]];(void 0===c||d.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!d.isEmptyObject(b)}};var U=new L,ka=new L,bb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ab=/[A-Z]/g;d.extend({hasData:function(b){return ka.hasData(b)||U.hasData(b)},data:function(b,c,d){return ka.access(b,
c,d)},removeData:function(b,c){ka.remove(b,c)},_data:function(b,c,d){return U.access(b,c,d)},_removeData:function(b,c){U.remove(b,c)}});d.fn.extend({data:function(b,c){var a,e,f,k=this[0],l=k&&k.attributes;if(void 0===b){if(this.length&&(f=ka.get(k),1===k.nodeType&&!U.get(k,"hasDataAttrs"))){for(a=l.length;a--;)l[a]&&(e=l[a].name,0===e.indexOf("data-")&&(e=d.camelCase(e.slice(5)),F(k,e,f[e])));U.set(k,"hasDataAttrs",!0)}return f}return"object"==typeof b?this.each(function(){ka.set(this,b)}):ha(this,
function(c){var d;if(k&&void 0===c){if((d=ka.get(k,b),void 0!==d)||(d=F(k,b),void 0!==d))return d}else this.each(function(){ka.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){ka.remove(this,b)})}});d.extend({queue:function(b,c,a){var e;if(b)return c=(c||"fx")+"queue",e=U.get(b,c),a&&(!e||Array.isArray(a)?e=U.access(b,c,d.makeArray(a)):e.push(a)),e||[]},dequeue:function(b,c){c=c||"fx";var a=d.queue(b,c),e=a.length,f=a.shift(),k=d._queueHooks(b,
c),l=function(){d.dequeue(b,c)};"inprogress"===f&&(f=a.shift(),e--);f&&("fx"===c&&a.unshift("inprogress"),delete k.stop,f.call(b,l,k));!e&&k&&k.empty.fire()},_queueHooks:function(b,c){var a=c+"queueHooks";return U.get(b,a)||U.access(b,a,{empty:d.Callbacks("once memory").add(function(){U.remove(b,[c+"queue",a])})})}});d.fn.extend({queue:function(b,c){var a=2;return"string"!=typeof b&&(c=b,b="fx",a--),arguments.length<a?d.queue(this[0],b):void 0===c?this:this.each(function(){var a=d.queue(this,b,c);
d._queueHooks(this,b);"fx"===b&&"inprogress"!==a[0]&&d.dequeue(this,b)})},dequeue:function(b){return this.each(function(){d.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var a,e=1,f=d.Deferred(),k=this,l=this.length,m=function(){--e||f.resolveWith(k,[k])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";l--;)(a=U.get(k[l],b+"queueHooks"))&&a.empty&&(e++,a.empty.add(m));return m(),f.promise(c)}});var Ra=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=
new RegExp("^(?:([+-])=|)("+Ra+")([a-z%]*)$","i"),ra=["Top","Right","Bottom","Left"],Ia=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&d.contains(b.ownerDocument,b)&&"none"===d.css(b,"display")},Sa=function(b,c,d,a){var e,f={};for(e in c)f[e]=b.style[e],b.style[e]=c[e];d=d.apply(b,a||[]);for(e in c)b.style[e]=f[e];return d},Ja={};d.fn.extend({show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():
this.each(function(){Ia(this)?d(this).show():d(this).hide()})}});var Ta=/^(?:checkbox|radio)$/i,Ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,La=/^$|\/(?:java|ecma)script/i,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;
var db=/<|&#?\w+;/;!function(){var b=f.createDocumentFragment().appendChild(f.createElement("div")),c=f.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");b.appendChild(c);P.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;b.innerHTML="<textarea>x</textarea>";P.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Fa=f.documentElement,mb=/^key/,nb=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ua=/^([^.]*)(?:\.(.+)|)/;
d.event={global:{},add:function(b,c,a,e,f){var q,k,l,m,x,g,h,v,C,E;if(x=U.get(b))for(a.handler&&(q=a,a=q.handler,f=q.selector),f&&d.find.matchesSelector(Fa,f),a.guid||(a.guid=d.guid++),(m=x.events)||(m=x.events={}),(k=x.handle)||(k=x.handle=function(c){return"undefined"!=typeof d&&d.event.triggered!==c.type?d.event.dispatch.apply(b,arguments):void 0}),c=(c||"").match(qa)||[""],x=c.length;x--;)l=Ua.exec(c[x])||[],C=E=l[1],l=(l[2]||"").split(".").sort(),C&&(h=d.event.special[C]||{},C=(f?h.delegateType:
h.bindType)||C,h=d.event.special[C]||{},g=d.extend({type:C,origType:E,data:e,handler:a,guid:a.guid,selector:f,needsContext:f&&d.expr.match.needsContext.test(f),namespace:l.join(".")},q),(v=m[C])||(v=m[C]=[],v.delegateCount=0,h.setup&&!1!==h.setup.call(b,e,l,k)||b.addEventListener&&b.addEventListener(C,k)),h.add&&(h.add.call(b,g),g.handler.guid||(g.handler.guid=a.guid)),f?v.splice(v.delegateCount++,0,g):v.push(g),d.event.global[C]=!0)},remove:function(b,c,a,e,f){var q,k,l,m,x,g,h,v,C,E,z,t=U.hasData(b)&&
U.get(b);if(t&&(m=t.events)){c=(c||"").match(qa)||[""];for(x=c.length;x--;)if(l=Ua.exec(c[x])||[],C=z=l[1],E=(l[2]||"").split(".").sort(),C){h=d.event.special[C]||{};C=(e?h.delegateType:h.bindType)||C;v=m[C]||[];l=l[2]&&new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=q=v.length;q--;)g=v[q],!f&&z!==g.origType||a&&a.guid!==g.guid||l&&!l.test(g.namespace)||e&&e!==g.selector&&("**"!==e||!g.selector)||(v.splice(q,1),g.selector&&v.delegateCount--,h.remove&&h.remove.call(b,g));k&&!v.length&&
(h.teardown&&!1!==h.teardown.call(b,E,t.handle)||d.removeEvent(b,C,t.handle),delete m[C])}else for(C in m)d.event.remove(b,C+c[x],a,e,!0);d.isEmptyObject(m)&&U.remove(b,"handle events")}},dispatch:function(b){var c=d.event.fix(b),a,e,f,k,l,m,g=Array(arguments.length);e=(U.get(this,"events")||{})[c.type]||[];var h=d.event.special[c.type]||{};g[0]=c;for(a=1;a<arguments.length;a++)g[a]=arguments[a];if(c.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,c)){m=d.event.handlers.call(this,
c,e);for(a=0;(k=m[a++])&&!c.isPropagationStopped();)for(c.currentTarget=k.elem,e=0;(l=k.handlers[e++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(l.namespace)||(c.handleObj=l,c.data=l.data,f=((d.event.special[l.origType]||{}).handle||l.handler).apply(k.elem,g),void 0!==f&&!1===(c.result=f)&&(c.preventDefault(),c.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,c),c.result}},handlers:function(b,c){var a,e,f,k,l,m=[],g=c.delegateCount,h=b.target;if(g&&h.nodeType&&
!("click"===b.type&&1<=b.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==b.type||!0!==h.disabled)){k=[];l={};for(a=0;a<g;a++)e=c[a],f=e.selector+" ",void 0===l[f]&&(l[f]=e.needsContext?-1<d(f,this).index(h):d.find(f,this,null,[h]).length),l[f]&&k.push(e);k.length&&m.push({elem:h,handlers:k})}return h=this,g<c.length&&m.push({elem:h,handlers:c.slice(g)}),m},addProp:function(b,c){Object.defineProperty(d.Event.prototype,b,{enumerable:!0,configurable:!0,get:d.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:
function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[d.expando]?b:new d.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==I()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===I()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&
A(this,"input"))return this.click(),!1},_default:function(b){return A(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};d.removeEvent=function(b,c,d){b.removeEventListener&&b.removeEventListener(c,d)};d.Event=function(b,c){return this instanceof d.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?fa:D,this.target=b.target&&
3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&d.extend(this,c),this.timeStamp=b&&b.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(b,c)};d.Event.prototype={constructor:d.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=fa;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=
this.originalEvent;this.isPropagationStopped=fa;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=fa;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,
offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&mb.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&nb.test(b.type)?1&c?1:2&c?3:4&c?2:0:b.which}},d.event.addProp);d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){d.event.special[b]={delegateType:c,bindType:c,handle:function(b){var a,e=b.relatedTarget,
f=b.handleObj;return e&&(e===this||d.contains(this,e))||(b.type=f.origType,a=f.handler.apply(this,arguments),b.type=c),a}}});d.fn.extend({on:function(b,c,d,a){return da(this,b,c,d,a)},one:function(b,c,d,a){return da(this,b,c,d,a,1)},off:function(b,c,a){var e,f;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,d(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(f in b)this.off(f,c,b[f]);return this}return!1!==c&&"function"!=
typeof c||(a=c,c=void 0),!1===a&&(a=D),this.each(function(){d.event.remove(this,b,a,c)})}});var ob=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,pb=/<script|<style|<link/i,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,eb=/^true\/(.*)/,gb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;d.extend({htmlPrefilter:function(b){return b.replace(ob,"<$1></$2>")},clone:function(b,c,a){var e,f,q,k,l=b.cloneNode(!0),m=d.contains(b.ownerDocument,b);if(!(P.noCloneChecked||1!==
b.nodeType&&11!==b.nodeType||d.isXMLDoc(b)))for(k=r(l),q=r(b),e=0,f=q.length;e<f;e++){var g=q[e],h=k[e],v=h.nodeName.toLowerCase();"input"===v&&Ta.test(g.type)?h.checked=g.checked:"input"!==v&&"textarea"!==v||(h.defaultValue=g.defaultValue)}if(c)if(a)for(q=q||r(b),k=k||r(l),e=0,f=q.length;e<f;e++)ta(q[e],k[e]);else ta(b,l);return k=r(l,"script"),0<k.length&&K(k,!m&&r(b,"script")),l},cleanData:function(b){for(var c,a,e,f=d.event.special,k=0;void 0!==(a=b[k]);k++)if(Ea(a)){if(c=a[U.expando]){if(c.events)for(e in c.events)f[e]?
d.event.remove(a,e):d.removeEvent(a,e,c.handle);a[U.expando]=void 0}a[ka.expando]&&(a[ka.expando]=void 0)}}});d.fn.extend({detach:function(b){return Ba(this,b,!0)},remove:function(b){return Ba(this,b)},text:function(b){return ha(this,function(b){return void 0===b?d.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return ja(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||z(this,b).appendChild(b)})},prepend:function(){return ja(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=z(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return ja(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return ja(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===
b.nodeType&&(d.cleanData(r(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return d.clone(this,b,c)})},html:function(b){return ha(this,function(b){var c=this[0]||{},a=0,e=this.length;if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!pb.test(b)&&!ia[(Ka.exec(b)||["",""])[1].toLowerCase()]){b=d.htmlPrefilter(b);try{for(;a<e;a++)c=this[a]||{},1===c.nodeType&&(d.cleanData(r(c,!1)),c.innerHTML=b);c=0}catch(Y){}}c&&this.empty().append(b)},
null,b,arguments.length)},replaceWith:function(){var b=[];return ja(this,arguments,function(c){var a=this.parentNode;0>d.inArray(this,b)&&(d.cleanData(r(this)),a&&a.replaceChild(c,this))},b)}});d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){d.fn[b]=function(b){for(var a=[],e=d(b),f=e.length-1,k=0;k<=f;k++)b=k===f?this:this.clone(!0),d(e[k])[c](b),v.apply(a,b.get());return this.pushStack(a)}});var Ma=/^margin/,Ga=new RegExp("^("+
Ra+")(?!px)[a-z%]+$","i"),ya=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=h),c.getComputedStyle(b)};!function(){function b(){if(m){m.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";m.innerHTML="";Fa.appendChild(l);var b=h.getComputedStyle(m);c="1%"!==b.top;k="2px"===b.marginLeft;a="4px"===b.width;m.style.marginRight="50%";e="4px"===b.marginRight;Fa.removeChild(l);m=null}}var c,a,e,k,l=f.createElement("div"),
m=f.createElement("div");m.style&&(m.style.backgroundClip="content-box",m.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===m.style.backgroundClip,l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.appendChild(m),d.extend(P,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),a},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),k}}))}();var qb=/^(none|table(?!-c[ea]).+)/,
Va=/^--/,rb={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Oa=["Webkit","Moz","ms"],Na=f.createElement("div").style;d.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=ea(b,"opacity");return""===d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,a,e){if(b&&
3!==b.nodeType&&8!==b.nodeType&&b.style){var f,k,l,q=d.camelCase(c),m=Va.test(c),g=b.style;return m||(c=Q(q)),l=d.cssHooks[c]||d.cssHooks[q],void 0===a?l&&"get"in l&&void 0!==(f=l.get(b,!1,e))?f:g[c]:(k=typeof a,"string"===k&&(f=wa.exec(a))&&f[1]&&(a=J(b,c,f),k="number"),null!=a&&a===a&&("number"===k&&(a+=f&&f[3]||(d.cssNumber[q]?"":"px")),P.clearCloneStyle||""!==a||0!==c.indexOf("background")||(g[c]="inherit"),l&&"set"in l&&void 0===(a=l.set(b,a,e))||(m?g.setProperty(c,a):g[c]=a)),void 0)}},css:function(b,
c,a,e){var f,k,l,q=d.camelCase(c);return Va.test(c)||(c=Q(q)),l=d.cssHooks[c]||d.cssHooks[q],l&&"get"in l&&(f=l.get(b,!0,a)),void 0===f&&(f=ea(b,c,e)),"normal"===f&&c in Wa&&(f=Wa[c]),""===a||a?(k=parseFloat(f),!0===a||isFinite(k)?k||0:f):f}});d.each(["height","width"],function(b,c){d.cssHooks[c]={get:function(b,a,e){if(a)return!qb.test(d.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?aa(b,c,e):Sa(b,rb,function(){return aa(b,c,e)})},set:function(b,a,e){var f,k=e&&ya(b);
e=e&&Ca(b,c,e,"border-box"===d.css(b,"boxSizing",!1,k),k);return e&&(f=wa.exec(a))&&"px"!==(f[3]||"px")&&(b.style[c]=a,a=d.css(b,c)),ga(b,a,e)}}});d.cssHooks.marginLeft=Z(P.reliableMarginLeft,function(b,c){if(c)return(parseFloat(ea(b,"marginLeft"))||b.getBoundingClientRect().left-Sa(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});d.each({margin:"",padding:"",border:"Width"},function(b,c){d.cssHooks[b+c]={expand:function(d){var a=0,e={};for(d="string"==typeof d?d.split(" "):
[d];4>a;a++)e[b+ra[a]+c]=d[a]||d[a-2]||d[0];return e}};Ma.test(b)||(d.cssHooks[b+c].set=ga)});d.fn.extend({css:function(b,c){return ha(this,function(b,c,a){var e,f={},k=0;if(Array.isArray(c)){a=ya(b);for(e=c.length;k<e;k++)f[c[k]]=d.css(b,c[k],!1,a);return f}return void 0!==a?d.style(b,c,a):d.css(b,c)},b,c,1<arguments.length)}});d.fn.delay=function(b,c){return b=d.fx?d.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var a=h.setTimeout(c,b);d.stop=function(){h.clearTimeout(a)}})};(function(){var b=
f.createElement("input"),c=f.createElement("select").appendChild(f.createElement("option"));b.type="checkbox";P.checkOn=""!==b.value;P.optSelected=c.selected;b=f.createElement("input");b.value="t";b.type="radio";P.radioValue="t"===b.value})();var Xa,va=d.expr.attrHandle;d.fn.extend({attr:function(b,c){return ha(this,d.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){d.removeAttr(this,b)})}});d.extend({attr:function(b,c,a){var e,f,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return"undefined"==
typeof b.getAttribute?d.prop(b,c,a):(1===k&&d.isXMLDoc(b)||(f=d.attrHooks[c.toLowerCase()]||(d.expr.match.bool.test(c)?Xa:void 0)),void 0!==a?null===a?void d.removeAttr(b,c):f&&"set"in f&&void 0!==(e=f.set(b,a,c))?e:(b.setAttribute(c,a+""),a):f&&"get"in f&&null!==(e=f.get(b,c))?e:(e=d.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!P.radioValue&&"radio"===c&&A(b,"input")){var a=b.value;return b.setAttribute("type",c),a&&(b.value=a),c}}}},removeAttr:function(b,c){var a,d=
0,e=c&&c.match(qa);if(e&&1===b.nodeType)for(;a=e[d++];)b.removeAttribute(a)}});Xa={set:function(b,c,a){return!1===c?d.removeAttr(b,a):b.setAttribute(a,a),a}};d.each(d.expr.match.bool.source.match(/\w+/g),function(b,c){var a=va[c]||d.find.attr;va[c]=function(b,c,d){var e,f,k=c.toLowerCase();return d||(f=va[k],va[k]=e,e=null!=a(b,c,d)?k:null,va[k]=f),e}});var sb=/^(?:input|select|textarea|button)$/i,tb=/^(?:a|area)$/i;d.fn.extend({prop:function(b,c){return ha(this,d.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[d.propFix[b]||
b]})}});d.extend({prop:function(b,c,a){var e,f,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return 1===k&&d.isXMLDoc(b)||(c=d.propFix[c]||c,f=d.propHooks[c]),void 0!==a?f&&"set"in f&&void 0!==(e=f.set(b,a,c))?e:b[c]=a:f&&"get"in f&&null!==(e=f.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=d.find.attr(b,"tabindex");return c?parseInt(c,10):sb.test(b.nodeName)||tb.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});P.optSelected||(d.propHooks.selected={get:function(b){b=
b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});d.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){d.propFix[this.toLowerCase()]=this});d.fn.extend({addClass:function(b){var c,a,e,f,k,l,m=0;if(d.isFunction(b))return this.each(function(c){d(this).addClass(b.call(this,c,T(this)))});if("string"==typeof b&&
b)for(c=b.match(qa)||[];a=this[m++];)if(f=T(a),e=1===a.nodeType&&" "+R(f)+" "){for(l=0;k=c[l++];)0>e.indexOf(" "+k+" ")&&(e+=k+" ");e=R(e);f!==e&&a.setAttribute("class",e)}return this},removeClass:function(b){var c,a,e,f,k,l,m=0;if(d.isFunction(b))return this.each(function(c){d(this).removeClass(b.call(this,c,T(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(qa)||[];a=this[m++];)if(f=T(a),e=1===a.nodeType&&" "+R(f)+" "){for(l=0;k=c[l++];)for(;-1<
e.indexOf(" "+k+" ");)e=e.replace(" "+k+" "," ");e=R(e);f!==e&&a.setAttribute("class",e)}return this},toggleClass:function(b,c){var a=typeof b;return"boolean"==typeof c&&"string"===a?c?this.addClass(b):this.removeClass(b):d.isFunction(b)?this.each(function(a){d(this).toggleClass(b.call(this,a,T(this),c),c)}):this.each(function(){var c,e,f,k;if("string"===a)for(e=0,f=d(this),k=b.match(qa)||[];c=k[e++];)f.hasClass(c)?f.removeClass(c):f.addClass(c);else void 0!==b&&"boolean"!==a||(c=T(this),c&&U.set(this,
"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":U.get(this,"__className__")||""))})},hasClass:function(b){var c,a=0;for(b=" "+b+" ";c=this[a++];)if(1===c.nodeType&&-1<(" "+R(T(c))+" ").indexOf(b))return!0;return!1}});var ub=/\r/g;d.fn.extend({val:function(b){var c,a,e,f=this[0];if(arguments.length)return e=d.isFunction(b),this.each(function(a){var f;1===this.nodeType&&(f=e?b.call(this,a,d(this).val()):b,null==f?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=d.map(f,
function(b){return null==b?"":b+""})),c=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,f,"value")||(this.value=f))});if(f)return c=d.valHooks[f.type]||d.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(a=c.get(f,"value"))?a:(a=f.value,"string"==typeof a?a.replace(ub,""):null==a?"":a)}});d.extend({valHooks:{option:{get:function(b){var c=d.find.attr(b,"value");return null!=c?c:R(d.text(b))}},select:{get:function(b){var c,a,e=b.options,f=b.selectedIndex,
k="select-one"===b.type,l=k?null:[],m=k?f+1:e.length;for(a=0>f?m:k?f:0;a<m;a++)if(c=e[a],!(!c.selected&&a!==f||c.disabled||c.parentNode.disabled&&A(c.parentNode,"optgroup"))){if(b=d(c).val(),k)return b;l.push(b)}return l},set:function(b,c){for(var a,e,f=b.options,k=d.makeArray(c),l=f.length;l--;)e=f[l],(e.selected=-1<d.inArray(d.valHooks.option.get(e),k))&&(a=!0);return a||(b.selectedIndex=-1),k}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=
-1<d.inArray(d(b).val(),c)}};P.checkOn||(d.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var Ya=/^(?:focusinfocus|focusoutblur)$/;d.extend(d.event,{trigger:function(b,c,a,e){var k,l,m,q,g,v,E,z=[a||f],t=oa.call(b,"type")?b.type:b;k=oa.call(b,"namespace")?b.namespace.split("."):[];if(l=m=a=a||f,3!==a.nodeType&&8!==a.nodeType&&!Ya.test(t+d.event.triggered)&&(-1<t.indexOf(".")&&(k=t.split("."),t=k.shift(),k.sort()),g=0>t.indexOf(":")&&"on"+t,b=b[d.expando]?b:new d.Event(t,
"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=k.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=a),c=null==c?[b]:d.makeArray(c,[b]),E=d.event.special[t]||{},e||!E.trigger||!1!==E.trigger.apply(a,c))){if(!e&&!E.noBubble&&!d.isWindow(a)){q=E.delegateType||t;for(Ya.test(q+t)||(l=l.parentNode);l;l=l.parentNode)z.push(l),m=l;m===(a.ownerDocument||f)&&z.push(m.defaultView||m.parentWindow||h)}for(k=0;(l=z[k++])&&!b.isPropagationStopped();)b.type=
1<k?q:E.bindType||t,(v=(U.get(l,"events")||{})[b.type]&&U.get(l,"handle"))&&v.apply(l,c),(v=g&&l[g])&&v.apply&&Ea(l)&&(b.result=v.apply(l,c),!1===b.result&&b.preventDefault());return b.type=t,e||b.isDefaultPrevented()||E._default&&!1!==E._default.apply(z.pop(),c)||!Ea(a)||g&&d.isFunction(a[t])&&!d.isWindow(a)&&(m=a[g],m&&(a[g]=null),d.event.triggered=t,a[t](),d.event.triggered=void 0,m&&(a[g]=m)),b.result}},simulate:function(b,c,a){b=d.extend(new d.Event,a,{type:b,isSimulated:!0});d.event.trigger(b,
null,c)}});d.fn.extend({trigger:function(b,c){return this.each(function(){d.event.trigger(b,c,this)})},triggerHandler:function(b,c){var a=this[0];if(a)return d.event.trigger(b,c,a,!0)}});d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,c){d.fn[c]=function(b,a){return 0<arguments.length?this.on(c,null,b,a):this.trigger(c)}});d.fn.extend({hover:function(b,
c){return this.mouseenter(b).mouseleave(c||b)}});P.focusin="onfocusin"in h;P.focusin||d.each({focus:"focusin",blur:"focusout"},function(b,c){var a=function(b){d.event.simulate(c,b.target,d.event.fix(b))};d.event.special[c]={setup:function(){var d=this.ownerDocument||this,e=U.access(d,c);e||d.addEventListener(b,a,!0);U.access(d,c,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=U.access(d,c)-1;e?U.access(d,c,e):(d.removeEventListener(b,a,!0),U.remove(d,c))}}});var hb=/\[\]$/,Za=/\r?\n/g,
vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;d.param=function(b,c){var a,e=[],f=function(b,c){var a=d.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==a?"":a)};if(Array.isArray(b)||b.jquery&&!d.isPlainObject(b))d.each(b,function(){f(this.name,this.value)});else for(a in b)V(a,b[a],c,f);return e.join("&")};d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=
d.prop(this,"elements");return b?d.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!d(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(b)&&(this.checked||!Ta.test(b))}).map(function(b,c){var a=d(this).val();return null==a?null:Array.isArray(a)?d.map(a,function(b){return{name:c.name,value:b.replace(Za,"\r\n")}}):{name:c.name,value:a.replace(Za,"\r\n")}}).get()}});d.fn.extend({wrapAll:function(b){var c;return this[0]&&(d.isFunction(b)&&(b=b.call(this[0])),c=d(b,this[0].ownerDocument).eq(0).clone(!0),
this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(b){return d.isFunction(b)?this.each(function(c){d(this).wrapInner(b.call(this,c))}):this.each(function(){var c=d(this),a=c.contents();a.length?a.wrapAll(b):c.append(b)})},wrap:function(b){var c=d.isFunction(b);return this.each(function(a){d(this).wrapAll(c?b.call(this,a):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){d(this).replaceWith(this.childNodes)}),
this}});d.expr.pseudos.hidden=function(b){return!d.expr.pseudos.visible(b)};d.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};P.createHTMLDocument=function(){var b=f.implementation.createHTMLDocument("").body;return b.innerHTML="<form></form><form></form>",2===b.childNodes.length}();d.parseHTML=function(b,c,a){if("string"!=typeof b)return[];"boolean"==typeof c&&(a=c,c=!1);var e,k,l;return c||(P.createHTMLDocument?(c=f.implementation.createHTMLDocument(""),
e=c.createElement("base"),e.href=f.location.href,c.head.appendChild(e)):c=f),k=Aa.exec(b),l=!a&&[],k?[c.createElement(k[1])]:(k=O([b],c,l),l&&l.length&&d(l).remove(),d.merge([],k.childNodes))};d.offset={setOffset:function(b,a,e){var c,f,k,l,m,q,g=d.css(b,"position"),h=d(b),v={};"static"===g&&(b.style.position="relative");m=h.offset();k=d.css(b,"top");q=d.css(b,"left");("absolute"===g||"fixed"===g)&&-1<(k+q).indexOf("auto")?(c=h.position(),l=c.top,f=c.left):(l=parseFloat(k)||0,f=parseFloat(q)||0);
d.isFunction(a)&&(a=a.call(b,e,d.extend({},m)));null!=a.top&&(v.top=a.top-m.top+l);null!=a.left&&(v.left=a.left-m.left+f);"using"in a?a.using.call(b,v):h.css(v)}};d.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(a){d.offset.setOffset(this,b,a)});var a,e,f,k,l=this[0];if(l)return l.getClientRects().length?(f=l.getBoundingClientRect(),a=l.ownerDocument,e=a.documentElement,k=a.defaultView,{top:f.top+k.pageYOffset-e.clientTop,left:f.left+k.pageXOffset-e.clientLeft}):
{top:0,left:0}},position:function(){if(this[0]){var b,a,e=this[0],f={top:0,left:0};return"fixed"===d.css(e,"position")?a=e.getBoundingClientRect():(b=this.offsetParent(),a=this.offset(),A(b[0],"html")||(f=b.offset()),f={top:f.top+d.css(b[0],"borderTopWidth",!0),left:f.left+d.css(b[0],"borderLeftWidth",!0)}),{top:a.top-f.top-d.css(e,"marginTop",!0),left:a.left-f.left-d.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===d.css(b,"position");)b=
b.offsetParent;return b||Fa})}});d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,a){var c="pageYOffset"===a;d.fn[b]=function(e){return ha(this,function(b,e,f){var k;return d.isWindow(b)?k=b:9===b.nodeType&&(k=b.defaultView),void 0===f?k?k[a]:b[e]:void(k?k.scrollTo(c?k.pageXOffset:f,c?f:k.pageYOffset):b[e]=f)},b,e,arguments.length)}});d.each(["top","left"],function(b,a){d.cssHooks[a]=Z(P.pixelPosition,function(b,c){if(c)return c=ea(b,a),Ga.test(c)?d(b).position()[a]+"px":c})});
d.each({Height:"height",Width:"width"},function(b,a){d.each({padding:"inner"+b,content:a,"":"outer"+b},function(c,e){d.fn[e]=function(f,k){var l=arguments.length&&(c||"boolean"!=typeof f),m=c||(!0===f||!0===k?"margin":"border");return ha(this,function(a,c,f){var k;return d.isWindow(a)?0===e.indexOf("outer")?a["inner"+b]:a.document.documentElement["client"+b]:9===a.nodeType?(k=a.documentElement,Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])):void 0===f?d.css(a,
c,m):d.style(a,c,f,m)},a,l?f:void 0,l)}})});d.fn.extend({bind:function(b,a,d){return this.on(b,null,a,d)},unbind:function(b,a){return this.off(b,null,a)},delegate:function(b,a,d,e){return this.on(a,b,d,e)},undelegate:function(b,a,d){return 1===arguments.length?this.off(b,"**"):this.off(a,b||"**",d)}});d.holdReady=function(b){b?d.readyWait++:d.ready(!0)};d.isArray=Array.isArray;d.parseJSON=JSON.parse;d.nodeName=A;"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var xb=
h.jQuery,yb=h.$;return d.noConflict=function(b){return h.$===d&&(h.$=yb),b&&h.jQuery===d&&(h.jQuery=xb),d},a||(h.jQuery=h.$=d),d});var kUtil=kUtil||{};Math.sign||(Math.sign=function(h){return 0<h?1:0==h?0>1/h?-0:0:0>h?-1:NaN});kUtil.Matrix=function(h,a,g,w,A,ca){this.a=h;this.b=a;this.c=g;this.d=w;this.e=A;this.f=ca};kUtil.Matrix.dot=function(h,a){return new kUtil.Matrix(h.a*a.a+h.c*a.b,h.b*a.a+h.d*a.b,h.a*a.c+h.c*a.d,h.b*a.c+h.d*a.d,h.a*a.e+h.c*a.f+h.e,h.b*a.e+h.d*a.f+h.f)};
kUtil.Matrix.prototype.dot=function(h){return kUtil.Matrix.dot(this,h)};kUtil.Matrix.equals=function(h,a){return h.a==a.a&&h.b==a.b&&h.c==a.c&&h.d==a.d&&h.e==a.e&&h.f==a.f};kUtil.Matrix.prototype.equals=function(h){return kUtil.Matrix.equals(this,h)};kUtil.Matrix.prototype.inversion=function(){var h=this.a,a=this.b,g=this.c,w=this.d,A=this.e,ca=this.f,N=h*w-a*g;return new kUtil.Matrix(w/N,-a/N,-g/N,h/N,(g*ca-w*A)/N,(a*A-h*ca)/N)};
kUtil.convertURLToBlob=function(h,a){var g=new XMLHttpRequest;g.open("GET",h,!0);g.responseType="blob";g.onloadend=function(){a(this.response)};g.send()};kUtil.convertBase64ToBlob=function(h,a){for(var g=atob(h),w=Array(g.length),A=0;A<g.length;++A)w[A]=g.charCodeAt(A);g=new Uint8Array(w);return new Blob([g],{type:a})};
Date.prototype.kUtilFormat=function(h){var a={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"h+":this.getUTCHours(),"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),S:this.getUTCMilliseconds()};/(y+)/.test(h)&&(h=h.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var g in a)(new RegExp("("+g+")")).test(h)&&(h=h.replace(RegExp.$1,1==RegExp.$1.length?a[g]:("00"+a[g]).substr((""+a[g]).length)));return h};
kUtil.copyToClipBoard=function(h){if(navigator.clipboard)navigator.clipboard.writeText(h)["catch"](function(a){alert("copy failed, info: "+(a.message||a))});else{var a=document.createElement("textarea");a.style.width="4px";a.style.height="4px";a.style.position="fixed";a.style.left="0";a.style.top="0";jQuery(document.body).append(a);a.value=h;if(h=navigator.userAgent.match(/ipad|iphone/i)){var g=document.createRange();g.selectNodeContents(a);var w=window.getSelection();w.removeAllRanges();w.addRange(g);
a.setSelectionRange(0,999999)}else a.focus(),a.select();try{document.execCommand("copy")||h||alert("copy failed")}catch(A){alert("copy failed, info: "+(A.message||A))}jQuery(a).remove()}};
(function(h){h.fn.borderWidth=function(){var a;a=window.getComputedStyle?getComputedStyle(this[0]):this[0].currentStyle;var g={};g.left=parseFloat(a.getPropertyValue?a.getPropertyValue("border-left-width"):a.getAttribute("border-left-width"))||0;g.top=parseFloat(a.getPropertyValue?a.getPropertyValue("border-top-width"):a.getAttribute("border-top-width"))||0;g.right=parseFloat(a.getPropertyValue?a.getPropertyValue("border-right-width"):a.getAttribute("border-right-width"))||0;g.bottom=parseFloat(a.getPropertyValue?
a.getPropertyValue("border-bottom-width"):a.getAttribute("border-bottom-width"))||0;return g};h.fn.padding=function(){var a;a=window.getComputedStyle?getComputedStyle(this[0]):this[0].currentStyle;var g={};g.left=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-left"):a.getAttribute("padding-left"))||0;g.top=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-top"):a.getAttribute("padding-top"))||0;g.right=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-right"):a.getAttribute("padding-right"))||
0;g.bottom=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-bottom"):a.getAttribute("padding-bottom"))||0;return g};h.fn.borderBoxRect=function(){var a=null;window.getComputedStyle&&(a=getComputedStyle(this[0]));var g=this.offset(),h={};h.pageX0=g.left;h.pageY0=g.top;h.width=a?parseFloat(a.width):this.outerWidth();h.height=a?parseFloat(a.height):this.outerHeight();h.pageX1=h.pageX0+h.width;h.pageY1=h.pageY0+h.height;return h};h.fn.paddingBoxRect=function(){var a=this.borderBoxRect(),g=this.borderWidth(),
h={};h.pageX0=a.pageX0+g.left;h.pageY0=a.pageY0+g.top;h.width=window.getComputedStyle?a.width-(g.left+g.right):this.innerWidth();h.height=window.getComputedStyle?a.height-(g.top+g.bottom):this.innerHeight();h.pageX1=a.pageX1-g.right;h.pageY1=a.pageY1-g.bottom;return h};h.fn.contentBoxRect=function(){var a=this.paddingBoxRect(),g=this.padding(),h={};h.pageX0=a.pageX0+g.left;h.pageY0=a.pageY0+g.top;h.width=window.getComputedStyle?a.width-(g.left+g.right):this.width();h.height=window.getComputedStyle?
a.height-(g.top+g.bottom):this.height();h.pageX1=a.pageX1-g.right;h.pageY1=a.pageY1-g.bottom;return h};h.fn.getTransform=function(){var a=this.css("transform");if("none"==a||""==a)a=this[0].style.transform;var g="matrix(",h=a.indexOf(g);if(-1!=h){h+=g.length;a=a.substring(h,a.indexOf(")",h)).split(",");for(g=0;g<a.length;++g)a[g]=parseFloat(a[g]);return new kUtil.Matrix(a[0],a[1],a[2],a[3],a[4],a[5])}g="scale(";h=a.indexOf(g);return-1!=h?(h+=g.length,a=parseFloat(a.substring(h)),new kUtil.Matrix(a,
0,0,a,0,0)):new kUtil.Matrix(1,0,0,1,0,0)};h.fn.setTransform=function(a){a="matrix("+[a.a,a.b,a.c,a.d,a.e,a.f].join()+")";this.css("transform",a)}})(jQuery);var TaskQueue=function(){this._queue=[];this.isWorking=!1;this.timeout=100};TaskQueue.prototype.push=function(h,a,g,w){this._queue.push({task:h,context:a,args:g,handleReturn:w});this.isWorking||this.next()};TaskQueue.prototype.unshift=function(h,a,g,w){this._queue.unshift({task:h,context:a,args:g,handleReturn:w});this.isWorking||this.next()};
TaskQueue.prototype.next=function(){if(0==this._queue.length)this.isWorking=!1;else{this.isWorking=!0;var h=this._queue.shift(),a=h.task,g=h.context?h.context:self,w=h.args?h.args:[],A=h.handleReturn;setTimeout(function(){var h=a.apply(g,w);"function"==typeof A&&A(h)},this.timeout)}};
(function(){function h(a,h){h||a.match(/^data\:([^\;]+)\;base64,/mi);a=a.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var g=atob(a),r=g.length,n=new ArrayBuffer(r),K=new Uint8Array(n),p=0;p<r;p++)K[p]=g.charCodeAt(p);return n}function a(a,h){var g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType="blob";g.onload=function(a){200!=this.status&&0!==this.status||h(this.response)};g.send()}function g(g,n){function r(a){var h=w(a),t;a:if(t=new DataView(a),255!=t.getUint8(0)||216!=t.getUint8(1))t=!1;
else{for(var B=2,r=a.byteLength;B<r;){var p=t,K=B;if(56===p.getUint8(K)&&66===p.getUint8(K+1)&&73===p.getUint8(K+2)&&77===p.getUint8(K+3)&&4===p.getUint8(K+4)&&4===p.getUint8(K+5)){p=t.getUint8(B+7);0!==p%2&&(p+=1);0===p&&(p=4);var r=B+8+p,B=t.getUint16(B+6+p),I,D;t=r;r=new DataView(a);p={};for(K=t;K<t+B;)28===r.getUint8(K)&&2===r.getUint8(K+1)&&(I=r.getUint8(K+2),I in S&&(D=r.getInt16(K+3),I=S[I],D=N(r,K+5,D),p.hasOwnProperty(I)?p[I]instanceof Array?p[I].push(D):p[I]=[p[I],D]:p[I]=D)),K++;t=p;break a}B++}t=
void 0}var u;a:if("DOMParser"in self)if(B=new DataView(a),255!=B.getUint8(0)||216!=B.getUint8(1))u=!1;else{r=2;p=a.byteLength;for(a=new DOMParser;r<p-4;)if("http"==N(B,r,4)){p=r-1;r=B.getUint16(r-2)-1;B=N(B,p,r);r=B.indexOf("xmpmeta>")+8;B=B.substring(B.indexOf("<x:xmpmeta"),r);r=B.indexOf("x:xmpmeta")+10;B=B.slice(0,r)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+
B.slice(r);b:{a=a.parseFromString(B,"text/xml");try{B={};if(0<a.children.length)for(r=0;r<a.children.length;r++){var O=a.children.item(r),y=O.attributes,A;for(A in y){var F=y[A],J=F.nodeName,V=F.nodeValue;void 0!==J&&(B[J]=V)}var G=O.nodeName;if("undefined"==typeof B[G])B[G]=xml2json(O);else{if("undefined"==typeof B[G].push){var f=B[G];B[G]=[];B[G].push(f)}B[G].push(xml2json(O))}}else B=a.textContent;u=B;break b}catch(e){console.log(e.message)}u=void 0}break a}else r++;u=void 0}else u=void 0;g.exifdata=
h||{};g.iptcdata=t||{};g.xmpdata=u||{};n&&n.call(g)}if(g.src)if(/^data\:/i.test(g.src)){var K=h(g.src);r(K)}else if(/^blob\:/i.test(g.src)){var p=new FileReader;p.onload=function(a){r(a.target.result)};a(g.src,function(a){p.readAsArrayBuffer(a)})}else{var I=new XMLHttpRequest;I.onload=function(){if(200==this.status||0===this.status)r(I.response);else throw"Could not load image";I=null};I.open("GET",g.src,!0);I.responseType="arraybuffer";I.send(null)}else self.FileReader&&(g instanceof self.Blob||
g instanceof self.File)&&(p=new FileReader,p.onload=function(a){r(a.target.result)},p.readAsArrayBuffer(g))}function w(a){var g=new DataView(a);if(255!=g.getUint8(0)||216!=g.getUint8(1))return!1;var h=2;a=a.byteLength;for(var r;h<a;){if(255!=g.getUint8(h))return!1;r=g.getUint8(h+1);if(225==r)return na(g,h+4,g.getUint16(h+2)-2);h+=2+g.getUint16(h+2)}}function A(a,g,h,n,p){var r=a.getUint16(h,!p),K={},z,t,B;for(B=0;B<r;B++)z=h+12*B+2,t=n[a.getUint16(z,!p)],K[t]=ca(a,z,g,h,p);return K}function ca(a,
g,h,n,p){var r=a.getUint16(g+2,!p);n=a.getUint32(g+4,!p);h=a.getUint32(g+8,!p)+h;var u,z;switch(r){case 1:case 7:if(1==n)return a.getUint8(g+8,!p);h=4<n?h:g+8;g=[];for(r=0;r<n;r++)g[r]=a.getUint8(h+r);return g;case 2:return N(a,4<n?h:g+8,n-1);case 3:if(1==n)return a.getUint16(g+8,!p);h=2<n?h:g+8;g=[];for(r=0;r<n;r++)g[r]=a.getUint16(h+2*r,!p);return g;case 4:if(1==n)return a.getUint32(g+8,!p);g=[];for(r=0;r<n;r++)g[r]=a.getUint32(h+4*r,!p);return g;case 5:if(1==n)return u=a.getUint32(h,!p),z=a.getUint32(h+
4,!p),a=new Number(u/z),a.numerator=u,a.denominator=z,a;g=[];for(r=0;r<n;r++)u=a.getUint32(h+8*r,!p),z=a.getUint32(h+4+8*r,!p),g[r]=new Number(u/z),g[r].numerator=u,g[r].denominator=z;return g;case 9:if(1==n)return a.getInt32(g+8,!p);g=[];for(r=0;r<n;r++)g[r]=a.getInt32(h+4*r,!p);return g;case 10:if(1==n)return a.getInt32(h,!p)/a.getInt32(h+4,!p);g=[];for(r=0;r<n;r++)g[r]=a.getInt32(h+8*r,!p)/a.getInt32(h+4+8*r,!p);return g}}function N(a,g,h){for(var r="",n=g;n<g+h;n++)r+=String.fromCharCode(a.getUint8(n));
return r}function na(a,g){if("Exif"!=N(a,g,4))return!1;var h,n,r,u,w=g+6;if(18761==a.getUint16(w))h=!1;else if(19789==a.getUint16(w))h=!0;else return!1;if(42!=a.getUint16(w+2,!h))return!1;var z=a.getUint32(w+4,!h);if(8>z)return!1;n=A(a,w,w+z,p,h);if(n.ExifIFDPointer)for(r in u=A(a,w,w+n.ExifIFDPointer,y,h),u){switch(r){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":u[r]=
J[r][u[r]];break;case "ExifVersion":case "FlashpixVersion":u[r]=String.fromCharCode(u[r][0],u[r][1],u[r][2],u[r][3]);break;case "ComponentsConfiguration":u[r]=J.Components[u[r][0]]+J.Components[u[r][1]]+J.Components[u[r][2]]+J.Components[u[r][3]]}n[r]=u[r]}if(n.GPSInfoIFDPointer)for(r in u=A(a,w,w+n.GPSInfoIFDPointer,L,h),u){switch(r){case "GPSVersionID":u[r]=u[r][0]+"."+u[r][1]+"."+u[r][2]+"."+u[r][3]}n[r]=u[r]}z=w+z;r=a.getUint16(z,!h);if(z=a.getUint32(z+2+12*r,!h))if(z>a.byteLength)w={};else{z=
A(a,w,w+z,F,h);if(z.Compression)switch(z.Compression){case 6:z.JpegIFOffset&&z.JpegIFByteCount&&(z.blob=new Blob([new Uint8Array(a.buffer,w+z.JpegIFOffset,z.JpegIFByteCount)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",z.Compression)}else 2==z.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");w=z}else w={};n.thumbnail=w;return n}
var u=self,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);this.EXIFwrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=n),exports.EXIF=n):u.EXIF=n;var y=n.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",
36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",
41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",
42016:"ImageUniqueID"},p=n.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",
301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},L=n.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",
16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},F=n.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",
278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},J=n.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",
2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",
24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",
32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",
95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},
GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},S={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",
105:"headline",116:"copyright",15:"category"};n.getData=function(a,h){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;a.exifdata?h&&h.call(a):g(a,h);return!0};n.getTag=function(a,g){if(a.exifdata)return a.exifdata[g]};n.getIptcTag=function(a,g){if(a.exifdata)return a.iptcdata[g]};n.getAllTags=function(a){if(!a.exifdata)return{};var g;a=a.exifdata;var h={};for(g in a)a.hasOwnProperty(g)&&(h[g]=a[g]);return h};n.getAllIptcTags=
function(a){if(!a.exifdata)return{};var g;a=a.iptcdata;var h={};for(g in a)a.hasOwnProperty(g)&&(h[g]=a[g]);return h};n.pretty=function(a){if(!a.exifdata)return"";var g;a=a.exifdata;var h="";for(g in a)a.hasOwnProperty(g)&&(h="object"==typeof a[g]?a[g]instanceof Number?h+(g+" : "+a[g]+" ["+a[g].numerator+"/"+a[g].denominator+"]\r\n"):h+(g+" : ["+a[g].length+" values]\r\n"):h+(g+" : "+a[g]+"\r\n"));return h};n.readFromBinaryFile=function(a){return w(a)};"function"===typeof define&&define.amd&&define("exif-js",
[],function(){return n})}).call(this);
(function(h){function a(){for(var a=0;a<I.length;a++)I[a][0](I[a][1]);I=[];da=!1}function g(g,h){I.push([g,h]);da||(da=!0,D(a,0))}function w(a,g){function h(a){N(g,a)}function t(a){u(g,a)}try{a(h,t)}catch(ja){t(ja)}}function A(a){var g=a.owner,h=g.state_,g=g.data_,z=a[h];a=a.then;if("function"===typeof z){h=K;try{g=z(g)}catch(ja){u(a,ja)}}ca(a,g)||(h===K&&N(a,g),h===O&&u(a,g))}function ca(a,g){var h;try{if(a===g)throw new TypeError("A promises callback cannot return that same promise.");if(g&&("function"===
typeof g||"object"===typeof g)){var t=g.then;if("function"===typeof t)return t.call(g,function(t){h||(h=!0,g!==t?N(a,t):na(a,t))},function(g){h||(h=!0,u(a,g))}),!0}}catch(ja){return h||u(a,ja),!0}return!1}function N(a,g){a!==g&&ca(a,g)||na(a,g)}function na(a,h){a.state_===S&&(a.state_=r,a.data_=h,g(y,a))}function u(a,h){a.state_===S&&(a.state_=r,a.data_=h,g(p,a))}function n(a){var g=a.then_;a.then_=void 0;for(a=0;a<g.length;a++)A(g[a])}function y(a){a.state_=K;n(a)}function p(a){a.state_=O;n(a)}function L(a){if("function"!==
typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof L)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];w(a,this)}var F=h.Promise,J=F&&"resolve"in F&&"reject"in F&&"all"in F&&"race"in F&&function(){var a;new F(function(g){a=g});return"function"===typeof a}();"undefined"!==typeof exports&&exports?(exports.Promise=J?F:L,exports.Polyfill=L):"function"==
typeof define&&define.amd?define(function(){return J?F:L}):J||(h.Promise=L);var S="pending",r="sealed",K="fulfilled",O="rejected",fa=function(){},D="undefined"!==typeof setImmediate?setImmediate:setTimeout,I=[],da;L.prototype={constructor:L,state_:S,then_:null,data_:void 0,then:function(a,h){var t={owner:this,then:new this.constructor(fa),fulfilled:a,rejected:h};this.state_===K||this.state_===O?g(A,t):this.then_.push(t);return t.then},"catch":function(a){return this.then(null,a)}};L.all=function(a){if("[object Array]"!==
Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(g,h){function t(a){p++;return function(h){n[a]=h;--p||g(n)}}for(var n=[],p=0,r=0,B;r<a.length;r++)(B=a[r])&&"function"===typeof B.then?B.then(t(r),h):n[r]=B;p||g(n)})};L.race=function(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.race().");return new this(function(g,h){for(var n=0,t;n<a.length;n++)(t=a[n])&&"function"===
typeof t.then?t.then(g,h):g(t)})};L.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(g){g(a)})};L.reject=function(a){return new this(function(g,h){h(a)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
var KPainter=function(h){var a=this;h=h||{};KPainter.xxx="mouse"==h.gesturer?!1:"touch"==h.gesturer?!0:"ontouchend"in document?!0:!1;var g=jQuery,w=function(a,g,h){return new Promise(function(n){if(a.toBlob)a.toBlob(function(a){n(a)},g,h);else{var t=a.toDataURL(g,h),t=kUtil.convertBase64ToBlob(t.substring(t.indexOf(",")+1),g);n(t)}})},A=function(a,g,h){g=g||new kUtil.Matrix(1,0,0,1,0,0);var n=document.createElement("canvas"),t=!1;0!=g.a*g.d&&0==g.b*g.c?(n.width=a.naturalWidth||a.width,n.height=a.naturalHeight||
a.height):(t=!0,n.width=a.naturalHeight||a.height,n.height=a.naturalWidth||a.width);if(n.width>h||n.height>h)h/=Math.max(n.width,n.height),n.width=Math.min(n.width*h),n.height=Math.min(n.height*h);h=n.getContext("2d");h.setTransform(g.a,g.b,g.c,g.d,g.e*n.width,g.f*n.height);t?h.drawImage(a,0,0,n.height,n.width):h.drawImage(a,0,0,n.width,n.height);return n},ca=function(a,g,h){return new Promise(function(n){var t=function(){var t=URL.createObjectURL(a),p=new Image;p.onload=p.onerror=function(){p.onload=
p.onerror=null;var a=A(p,g,h);URL.revokeObjectURL(t);n(a)};p.src=t};window.createImageBitmap?createImageBitmap(a).then(function(a){n(A(a,g,h))})["catch"](function(){t()}):t()})},N=KPainter._doCallbackNoBreak,na=g('<div style="width:800px;height:600px;border:1px solid #ccc;"><div class="kPainterBox"><div class="kPainterImgsDiv"><canvas class="kPainterCanvas" style="display:none;left:0;top:0;"></canvas></div><div class="kPainterCroper" style="width:50px;height:50px;display:none;"><div class="kPainterCells"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div class="kPainterBigMover" data-orient="0,0" style="display:none"></div><div class="kPainterEdges"><div data-orient="-1,0"></div><div data-orient="0,-1"></div><div data-orient="1,0"></div><div data-orient="0,1"></div></div><div class="kPainterCorners"><div data-orient="-1,-1"><i></i></div><div data-orient="1,-1"><i></i></div><div data-orient="1,1"><i></i></div><div data-orient="-1,1"><i></i></div></div><div class="kPainterMover" data-orient="0,0"><div></div><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 896q0 26-19 45l-256 256q-19 19-45 19t-45-19-19-45v-128h-384v384h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-384h-384v128q0 26-19 45t-45 19-45-19l-256-256q-19-19-19-45t19-45l256-256q19-19 45-19t45 19 19 45v128h384v-384h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45t-19 45-45 19h-128v384h384v-128q0-26 19-45t45-19 45 19l256 256q19 19 19 45z" fill="#fff"/></svg></div></div><div class="kPainterPerspect" style="display:none;"><canvas class="kPainterPerspectCvs"></canvas><div class="kPainterPerspectCorner" data-index="0">lt</div><div class="kPainterPerspectCorner" data-index="1">rt</div><div class="kPainterPerspectCorner" data-index="2">rb</div><div class="kPainterPerspectCorner" data-index="3">lb</div></div><div class="kPainterGesturePanel"></div></div></div>')[0],
u=g(na).children(),n=u.find("> .kPainterImgsDiv > .kPainterCanvas")[0];a.getHtmlElement=function(){return na};var y=-1,p=[],L=null,F=null,J=!1,S="view";a.getCurIndex=function(){return y};a.getCount=function(){return p.length};a.isEditing=function(){return J};a.getMode=function(){return S};a.getImage=function(a,h){void 0==h&&(h=y);if(!(isNaN(h)||(h=Math.round(h),0>h||h>=p.length))){var n;a?n=p[h]:(n=g(p[h]).clone()[0],n.setAttribute("style",""));return n}};a.onStartLoading=null;a.onFinishLoading=null;
var r=function(){N(a.onStartLoading)},K=function(){N(a.onFinishLoading)},O=new function(){a.defaultFileInput=g('<input type="file" accept="image/bmp,image/gif,image/jpeg,image/png,image/webp" multiple style="display:none">')[0];a.beforeAddImgFromFileChooseWindow=null;a.afterAddImgFromFileChooseWindow=null;g(a.defaultFileInput).change(function(f){var e=this;f=f.originalEvent;var k=function(f){n(f).then(function(f){N(a.afterAddImgFromFileChooseWindow,[!0,f]);e.value=""},function(f){N(a.afterAddImgFromFileChooseWindow,
[!1,f]);e.value=""})};a.beforeAddImgFromFileChooseWindow?N(a.beforeAddImgFromFileChooseWindow,[f,function(a){k(a)}]):k(e.files)});a.showFileChooseWindow=function(){if(J)return!1;a.defaultFileInput.click();return!0};a.beforeAddImgFromDropFile=null;a.afterAddImgFromDropFile=null;u.on("dragover",function(a){a=a.originalEvent;a.stopPropagation();a.preventDefault()});u.on("drop",function(f){f=f.originalEvent;f.stopPropagation();f.preventDefault();var e=function(e){n(e).then(function(e){N(a.afterAddImgFromDropFile,
[!0,e])},function(e){N(a.afterAddImgFromDropFile,[!1,e])})};a.beforeAddImgFromDropFile?N(a.beforeAddImgFromDropFile,[f,function(a){e(a)}]):e(f.dataTransfer.files)});var h=new TaskQueue,n=a.addImage=function(a){return new Promise(function(e,f){if(J)return f(Error("`addImage(imgData)`: The function is only valid in `view` mode."));if(!(a instanceof Blob||a instanceof HTMLCanvasElement||"string"==typeof a||a instanceof String||a instanceof HTMLImageElement)){if(a instanceof Array||a instanceof FileList){for(var k=
[],g=!1,m=0;m<a.length;++m)n(a[m]).then(function(f){k.push(f);g=!0;k.length==a.length&&e(k)},function(l){k.push(l);k.length==a.length&&(g?e(k):(Error("`addImage(imgData)`: No img added in this array. Get more info in `<this error object>.addImgErrArr`.").addImgErrArr=k,f(Error("`addImage(imgData)`: No img added in this array."))))});return}return f(Error("`addImage(imgData)`: Type of `imgData` should be `Blob`, `HTMLCanvasElement`, `HTMLImageElement`, `String(url)`, `Array(a array of source)`, `FileList`."))}r();
h.push(I,null,[a,function(a){a instanceof Error?f(Error("`addImage(imgData)`: "+a)):e(a);h.next();h.isWorking||K()}])})},B=function(a,e){"image/jpeg"!=a.type?e(null):EXIF.getData(a,function(){var a=null;switch(EXIF.getTag(this,"Orientation")){case 6:a=new kUtil.Matrix(0,1,-1,0,1,0);break;case 3:a=new kUtil.Matrix(-1,0,0,-1,1,1);break;case 8:a=new kUtil.Matrix(0,-1,1,0,0,1)}e(a)})},F=function(a,e){var f=a.slice(25,26),l=new FileReader;l.onload=function(){var a=(new Int8Array(l.result))[0];e(4==(a&
4))};l.readAsArrayBuffer(f)},L=function(a,e){var f=a.type;-1!=f.indexOf("webp")?e&&e("image/webp"):-1!=f.indexOf("gif")||-1!=f.indexOf("svg")?e&&e("image/png"):-1!=f.indexOf("png")?F(a,function(a){e&&e(a?"image/png":"image/jpeg")}):e&&e("image/jpeg")},I=function(a,e){ea(a,function(a,f){a instanceof Blob?N(function(){Q(a,f,e)}):e(a)})},ea=this.getBlobAndFormatFromAnyImgData=function(a,e){var f=function(a){L(a,function(f){B(a,function(k){Z(a,k,f,function(a){e(a,f)})})})};if(a instanceof Blob)f(a);else if(a instanceof
HTMLCanvasElement)w(a).then(f);else if("string"==typeof a||a instanceof String)if("data:"==a.substring(0,5)){var l="";"image/"==a.substring(5,11)&&(l=a.substring(5,a.indexOf(";",11)));l=kUtil.convertBase64ToBlob(a.substring(a.indexOf("base64,")+7),l);f(l)}else kUtil.convertURLToBlob(a,function(a){a?f(a):e("Network error.")});else if(a instanceof HTMLImageElement)if(a.crossOrigin&&"anonymous"!=a.crossOrigin)e("Cors error.");else{var g=a.src;ea(g,function(k,l){if(k instanceof Blob)e(k,l);else{var h=
document.createElement("canvas");h.width=a.naturalWidth;h.height=a.naturalHeight;h.getContext("2d").drawImage(a,0,0);var m="",v=g.lastIndexOf("?"),n;-1!=v?(n=g.lastIndexOf(".",v),-1!=n&&5>=v-n&&(m=g.substring(n+1,v))):(n=g.lastIndexOf("."),-1!=n&&(m=5>=g.length-n?g.substring(n+1):g.substring(n+1,n+5)));m=-1!=m.indexOf("webp")?"image/webp":-1!=m.indexOf("png")||-1!=m.indexOf("gif")||-1!=m.indexOf("svg")?"image/png":"image/jpeg";w(h,m).then(f)}})}else e("Type of `imgData` not support.")};a.addedImageMaxWH=
4096;var Z=function(a,e,k,l){e?ca(a,e).then(function(a){w(a,k).then(function(a){l&&l(a)})}):l&&l(a)};a.isShowNewImgWhenAdd=!0;var Q=function(f,e,k){var l=new Image;l.kPainterOriBlob=l.kPainterBlob=f;l.kPainterSaveFormat=e;var h=URL.createObjectURL(l.kPainterBlob);l.onload=l.onerror=function(){a._noAnyUseButForIosSafariBug0=l.naturalWidth;a._noAnyUseButForIosSafariBug1=l.naturalHeight;l.kPainterWidth=l.naturalWidth;l.kPainterHeight=l.naturalHeight;l.kPainterOriWidth=l.kPainterWidth;l.kPainterOriHeight=
l.kPainterHeight;if(l.kPainterWidth>a.addedImageMaxWH||l.kPainterHeight>a.addedImageMaxWH)w(A(l,null,a.addedImageMaxWH),e).then(function(a){URL.revokeObjectURL(h);l.kPainterOriBlob=l.kPainterBlob=a;h=URL.createObjectURL(l.kPainterBlob);l.src=h});else{l.onload=l.onerror=null;u.children(".kPainterImgsDiv").append(l);(a.isShowNewImgWhenAdd||-1==y)&&T(p.length-1);try{(function(){for(var a=0;a<m.length;++a){var e=m[a].cvs,f=m[a].mwh,f=Math.min(f/l.naturalWidth,f/l.naturalHeight,1);e.width=Math.round(l.naturalWidth*
f);e.height=Math.round(l.naturalHeight*f);e.getContext("2d").drawImage(l,0,0,e.width,e.height)}})()}catch(M){setTimeout(function(){throw M;},0)}k&&k(p.length-1)}};var m=[];try{(function(){for(var a=0;a<G.length;++a){var e=G[a],f=e.kPainterFunWrap,k=document.createElement("canvas");k.className="kPainterThumbnailCanvas";m.push({cvs:k,mwh:e.kPainterMaxWH});var l=null;try{l=f?f(k):k}catch(P){setTimeout(function(){throw P;},0);break}l&&(l.getKPainterIndex=function(){return e.kPainterThumbBoxArr.indexOf(this)},
e.kPainterThumbBoxArr.push(l),e.appendChild(l))}})()}catch(M){setTimeout(function(){throw M;},0)}g(l).hide();p.push(l);l.src=h},D=function(){var f=p[y],e=u;e.paddingBoxRect();var e=e.contentBoxRect(),k=f.kPainterZoom=Math.min(e.width/f.kPainterWidth,e.height/f.kPainterHeight);f.style.width=(Math.round(f.kPainterWidth*k)||1)+"px";f.style.height=(Math.round(f.kPainterHeight*k)||1)+"px";f.style.left=f.style.right=f.style.top=f.style.bottom="-100000px";if(2<=p.length){var l=p[(p.length+y-1)%p.length],
k=Math.min(e.width/l.kPainterWidth,e.height/l.kPainterHeight);l.style.width=(Math.round(l.kPainterWidth*k)||1)+"px";l.style.height=(Math.round(l.kPainterHeight*k)||1)+"px";l.style.right="100000px";l.style.left=l.style.top=l.style.bottom="-100000px"}3<=p.length&&(f=p[(p.length+y+1)%p.length],k=Math.min(e.width/f.kPainterWidth,e.height/f.kPainterHeight),f.style.width=(Math.round(f.kPainterWidth*k)||1)+"px",f.style.height=(Math.round(f.kPainterHeight*k)||1)+"px",f.style.left="100000px",f.style.right=
f.style.top=l.style.bottom="-100000px");N(a.onUpdateImgPosZoom)},O=null,aa=null,R;a.updateUIOnResize=function(f){null!=O&&(clearTimeout(O),O=null,aa());return f?new Promise(function(e,f){R=J;O=setTimeout(function(){if(-1!=y&&R==J)if(J){var f=a.getFreeTransformCornerPos();fa.setImgStyleFit();a.setFreeTransformCornerPos(f)}else D();O=null;e()},500);aa=f}):-1!=y?(J?(f=a.getFreeTransformCornerPos(),fa.setImgStyleFit(),a.setFreeTransformCornerPos(f)):D(),!0):!1};var T=this.showImg=function(f){var e=p[f];
g(e).siblings().hide();y=f;g(e).show();2<=p.length&&(0<f||a.allowedTouchMoveSwitchImgOverBoundary)&&g(p[(p.length+f-1)%p.length]).show();3<=p.length&&(f<p.length-1||a.allowedTouchMoveSwitchImgOverBoundary)&&g(p[(p.length+f+1)%p.length]).show();D();V()};a.onNumChange=null;var V=function(){var f=void 0,e=void 0;return function(){if(f!=y||e!=p.length)f=y,e=p.length,N(a.onNumChange,[y,p.length])}}();a.changePage=function(a){if(J)return!1;var e;switch(a){case "f":e=0;break;case "p":e=y-1;break;case "n":e=
y+1;break;case "l":e=p.length-1;break;default:if(1>arguments.length||isNaN(a))return!1;e=Math.round(a)}if(0>e||e>=p.length||e==y)return!1;T(e);return!0};a.movePage=function(){if(J)return!1;var a,e;1==arguments.length?e=arguments[0]:2<=arguments.length&&(a=arguments[0],e=arguments[1]);void 0==a&&(a=y);if(isNaN(e))return!1;e=Math.round(e);if(0>e||e>p.length||isNaN(a))return!1;a=Math.round(a);if(0>a||a>=p.length)return!1;if(a==e)return!0;var k=p.splice(a,1)[0];e>a?p.splice(e-1,0,k):p.splice(e,0,k);a==
y?y=e>a?e-1:e:a<y&&e>y?--y:a>y&&e<y&&++y;V();try{for(k=0;k<G.length;++k){var l=G[k],h=l.kPainterThumbBoxArr[a];l.kPainterThumbBoxArr.length==e?g(l).append(h):g(l.kPainterThumbBoxArr[e]).before(h);l.kPainterThumbBoxArr.splice(a,1);e>a?l.kPainterThumbBoxArr.splice(e-1,0,h):l.kPainterThumbBoxArr.splice(e,0,h)}}catch(m){setTimeout(function(){throw m;},0)}return!0};a.del=function(a){if(J)return!1;1>arguments.length&&(a=y);if(isNaN(a))return!1;a=Math.round(a);if(0>a||a>=p.length)return!1;URL.revokeObjectURL(p[a].src);
g(p[a]).remove();p.splice(a,1);try{for(var e=0;e<G.length;++e){var f=G[e];g(f.kPainterThumbBoxArr[a]).remove();f.kPainterThumbBoxArr.splice(a,1)}}catch(l){setTimeout(function(){throw l;},0)}a<y?(--y,V()):a==y?(y==p.length&&--y,0<=y?T(y):V()):V();return!0};a.getWidth=function(a){1>arguments.length&&(a=y);if(isNaN(a))return NaN;a=Math.round(a);return 0>a||a>=p.length?NaN:p[a].kPainterWidth};a.getHeight=function(a){1>arguments.length&&(a=y);if(isNaN(a))return NaN;a=Math.round(a);return 0>a||a>=p.length?
NaN:p[a].kPainterHeight};a.getBlob=function(a){1>arguments.length&&(a=y);if(isNaN(a))return null;a=Math.round(a);return 0>a||a>=p.length?null:p[a].kPainterBlob};a.download=function(a,e){2>arguments.length&&(e=y);if(isNaN(e))return null;e=Math.round(e);if(0>e||e>=p.length)return null;var f=document.createElement("a");f.target="_blank";var l=p[e].kPainterBlob;if(!a){var g="";l.type&&(g=l.type.substring(l.type.indexOf("/")+1));g="jpeg"==g?".jpg":"."+g;a=(new Date).getTime()+g}f.download=a;var h=URL.createObjectURL(l);
f.href=h;l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});f.dispatchEvent(l);setTimeout(function(){URL.revokeObjectURL(h)},1E4);return a};var G=this.thumbnailBoxArr=[];a.bindThumbnailBox=function(f,e,k){if(J||!(f instanceof HTMLElement))return!1;a.unbindThumbnailBox(f);f.innerHTML="";f.kPainterFunWrap=e;f.kPainterMaxWH=k||256;f.kPainterThumbBoxArr=[];for(k=0;k<p.length;++k){var l=p[k];a._noAnyUseButForIosSafariBug0=l.naturalWidth;a._noAnyUseButForIosSafariBug1=l.naturalHeight;var g=
Math.min(f.kPainterMaxWH/l.naturalWidth,f.kPainterMaxWH/l.naturalHeight,1),h=document.createElement("canvas");h.width=Math.round(l.naturalWidth*g);h.height=Math.round(l.naturalHeight*g);h.getContext("2d").drawImage(l,0,0,h.width,h.height);h.className="kPainterThumbnailCanvas";l=null;try{l=e?e(h):h}catch(M){return setTimeout(function(){throw M;},0),!1}l&&(l.getKPainterIndex=function(){return f.kPainterThumbBoxArr.indexOf(this)},f.kPainterThumbBoxArr.push(l),f.appendChild(l))}G.push(f);return!0};a.unbindThumbnailBox=
function(a){if(J)return!1;if(a){for(var e=0;e<G.length;++e)if(G[e]==a)return a.innerHTML="",a.kPainterFunWrap=void 0,a.kPainterThumbBoxArr=void 0,G.splice(e,1),!0;return!1}for(e=0;e<G.length;++e)a=G[e],a.innerHTML="",a.kPainterFunWrap=void 0,a.kPainterThumbBoxArr=void 0;G.length=0;return!0}};(function(a){a=a.length?a:function(a){var g=a.indexOf(".");return[a.substring(g,g+32),a.substring(0,8)]}(location.host);for(var g=null,h=0;h<a.length;++h){for(var n=1,p=a[h],r=0;r<p.length;++r)n*=p.charCodeAt(r),
n+=p.charCodeAt((r+1)%p.length),n%=11003;if(1!=n&&7480!=n&&5095!=n&&3124!=n&&8633!=n&&3122!=n)g=setTimeout(function(){N=function(){}},1E5*(1+2*Math.random()));else{null!==g&&clearTimeout(g);break}}})(arguments);var fa=new function(){var h=Number.NEGATIVE_INFINITY,t;a.leftDoubleClickZoomRate=2;a.rightDoubleClickZoomRate=.5;var r,w,A,K,D,Z,Q,ga,S,aa,R,T,V,G,f,e,k,l,v,m,M,E;a.allowedTouchMoveSwitchImgOverBoundary=!0;var oa=function(){if(-1!=y&&"posZoom"==L){L=F=null;u.find("> .kPainterCroper > .kPainterEdges").children().css("z-index",
1);u.find("> .kPainterCroper > .kPainterCorners").children().css("z-index",1);u.find("> .kPainterCroper > .kPainterMover").css("z-index",1);u.find("> .kPainterCroper > .kPainterBigMover").css("z-index",1);if(!J&&1!=p.length){var d=!1,f,k;1.2>m/M&&(d=!0,f=Math.sqrt(Math.pow(D-r,2)+Math.pow(Z-w,2)),k=f/(((new Date).getTime()-h)/1E3));if(l<-(Math.round(e*m)||1)/2||d&&-50>f&&-200>k){if(y+1<p.length||a.allowedTouchMoveSwitchImgOverBoundary){O.showImg((p.length+y+1)%p.length);return}}else if(l>(Math.round(e*
m)||1)/2||d&&50<f&&200<k)if(0<=y-1||a.allowedTouchMoveSwitchImgOverBoundary){O.showImg((p.length+y-1)%p.length);return}}P();la()}},H=function(a){var d=u;J?(G=n,e=G.width,k=G.height):(G=p[y],e=G.kPainterWidth,k=G.kPainterHeight);l=parseFloat(G.style.left)+1E5;v=parseFloat(G.style.top)+1E5;f=g(G).getTransform();if(0==f.a*f.d||0!=f.b*f.c){var h=e;e=k;k=h}m=G.kPainterZoom||1;T=d.paddingBoxRect();V=d.contentBoxRect();M=Math.min(V.width/e,V.height/k);J&&I.isCropRectShowing&&!a&&(a=I.getNeededRect(),M=Math.max(Math.max(a.width,
e*M)/e,Math.max(a.height,k*M)/k))};a.onUpdateImgPosZoom=null;var la=function(){G.style.left=l-1E5+"px";G.style.right=-l-1E5+"px";G.style.top=v-1E5+"px";G.style.bottom=-v-1E5+"px";G.kPainterZoom=m;0!=f.a*f.d&&0==f.b*f.c?(G.style.width=(Math.round(e*m)||1)+"px",G.style.height=(Math.round(k*m)||1)+"px"):(G.style.height=(Math.round(e*m)||1)+"px",G.style.width=(Math.round(k*m)||1)+"px");if(!J&&1!=p.length){var d=Math.max(0,((Math.round(e*m)||1)-T.width)/2);if(2<p.length||l>d){var g=p[(p.length+y-1)%p.length];
g.style.left=l-d-T.width+"px";g.style.right=-l+d+T.width+"px"}if(2<p.length||l<=-d)g=p[(p.length+y+1)%p.length],g.style.left=l+d+T.width+"px",g.style.right=-l-d-T.width+"px"}N(a.onUpdateImgPosZoom)},P=function(a,f){4<m&&(m=4);m<M&&(m=M);if(!a){var d=Math.round(e*m)||1;V.width>d?l=0:(d=(d-V.width)/2,l<-d?l=-d:l>d&&(l=d))}f||(d=Math.round(k*m)||1,V.height>d?v=0:(d=(d-V.height)/2,v<-d?v=-d:v>d&&(v=d)))};a.getZoom=function(){if(0!=p.length)return H(),m};a.setZoom=function(a,e){if(0==p.length)return null;
a=parseFloat(a);if(a!==a)return null;H();m=e?m*a:a;P();la();return m};this.setImgStyleFit=function(){H(!0);m=M;P();la();a.setCropRectArea()};u.on("touchstart touchcancel touchend mousedown",function(d){d.preventDefault();if(-1!=y){var e=d.originalEvent;d=e.targetTouches;var f;if(!d){if(!F)F="mouse";else if("mouse"!=F)return;d=[{pageX:e.clientX,pageY:e.clientY}];f=e.buttons}else if(d.length)if(!F)F="touch";else if("touch"!=F)return;if(1==d.length){D=r=d[0].pageX;Z=w=d[0].pageY;H();e=h;h=(new Date).getTime();
var k=t;t=f||(.01>Math.abs(m-M)/M?1:2);if(1E3>h-e&&t==k&&(1==t||2==t)&&8>Math.abs(d[0].pageX-A)&&8>Math.abs(d[0].pageY-K)){h=Number.NEGATIVE_INFINITY;f=D;var e=Z,g=m,k=1==t?a.leftDoubleClickZoomRate:a.rightDoubleClickZoomRate;m*=k;4<m&&(m=4,k=4/g);m<M&&(m=M,k=M/g);g=v+T.pageY0+T.height/2;l-=(k-1)*(f-(l+T.pageX0+T.width/2));v-=(k-1)*(e-g);P()}null==L&&(L="posZoom",u.find("> .kPainterCroper > .kPainterEdges").children().css("z-index","unset"),u.find("> .kPainterCroper > .kPainterCorners").children().css("z-index",
"unset"),u.find("> .kPainterCroper > .kPainterMover").css("z-index","unset"),u.find("> .kPainterCroper > .kPainterBigMover").css("z-index","unset"),E=d[0].identifier)}else 2==d.length?(D=r=d[0].pageX,Z=w=d[0].pageY,null==L&&(L="posZoom"),"posZoom"==L&&(H(),u.find("> .kPainterCroper > .kPainterEdges").children().css("z-index","unset"),u.find("> .kPainterCroper > .kPainterCorners").children().css("z-index","unset"),u.find("> .kPainterCroper > .kPainterMover").css("z-index","unset"),u.find("> .kPainterCroper > .kPainterBigMover").css("z-index",
"unset"),S=d[1].pageX,aa=d[1].pageY,Q=(D+S)/2,ga=(Z+aa)/2,R=Math.sqrt(Math.pow(D-S,2)+Math.pow(Z-aa,2)))):0==d.length&&(A=D,K=Z,oa())}});u.on("mouseup",function(a){"mouse"==F&&(a=a.originalEvent,A=a.clientX,K=a.clientY,oa())});u.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&(A=D,K=Z,oa())});u.on("contextmenu",function(a){a.preventDefault()});u.on("touchmove mousemove",function(a){a.preventDefault();var d=a.originalEvent.targetTouches;if(!d){if("mouse"!=F)return;d=[{pageX:a.originalEvent.clientX,
pageY:a.originalEvent.clientY}]}else if("touch"!=F)return;if(1==d.length){if("posZoom"==L&&E==d[0].identifier){a=D;var e=Z;D=d[0].pageX;Z=d[0].pageY;l+=D-a;v+=Z-e;P(!J);la()}}else if(2==d.length&&"posZoom"==L){a=Q;var e=ga,f=R,k=m;D=d[0].pageX;Z=d[0].pageY;S=d[1].pageX;aa=d[1].pageY;Q=(D+S)/2;ga=(Z+aa)/2;R=Math.sqrt(Math.pow(D-S,2)+Math.pow(Z-aa,2));d=R/f;m*=d;4<m&&(m=4,d=4/k);m<M&&(m=M,d=M/k);k=v+T.pageY0+T.height/2;l-=(d-1)*(a-(l+T.pageX0+T.width/2));v-=(d-1)*(e-k);P();la()}})},D=new function(){var h=
this,t,B=[];a.stepImgsGCThreshold=10;var A=[],D=[];a.addProtectedStep=function(a){if(!J)return!1;a=parseInt(a);if(a!==a)return!1;if(-1!=D.indexOf(a))return!0;D.push(a);D.sort(function(a,f){return a-f});return!0};a.removeProtectedStep=function(a){if(!J)return!1;a=parseInt(a);if(a!==a)return!1;a=D.indexOf(a);if(-1==a)return!1;D.splice(a,1);return!0};a.getProtectedSteps=function(){return J?D.concat():null};var N=h.pushStack=function(g){B.length=t+1;for(var h=A.length-1;0<h;--h)if(A[h].beginStep>t)--A.length;
else break;var f;if(g.srcBlob){f={crop:{left:0,top:0,width:1,height:1},transform:new kUtil.Matrix(1,0,0,1,0,0),srcBlob:g.srcBlob,saveFormat:g.saveFormat};for(h=0;A.length>=a.stepImgsGCThreshold;)if(D.filter(function(a){return A[h].beginStep<=a&&a<A[h].endStep}).length){if(!(++h<A.length))break}else{g=A[h].endStep;for(var e=A[h].beginStep;e<g;++e)B[e]=null;A.splice(h,1)}B.push(f);++t;A.push({blob:f.srcBlob,beginStep:t,endStep:t+1})}else{f=B[t];var k=f.crop,l=g.transform,n=g.crop,e={};g=l?l:f.transform;
e.left=k.left;e.top=k.top;e.width=k.width;e.height=k.height;0!=g.a*g.d&&0==g.b*g.c?(l&&(g=new kUtil.Matrix(Math.sign(l.a),0,0,Math.sign(l.d),0,0)),n&&(e.left=1==g.a?e.left+n.left*k.width:e.left+(1-n.left-n.width)*k.width,e.top=1==g.d?e.top+n.top*k.height:e.top+(1-n.top-n.height)*k.height,e.width*=n.width,e.height*=n.height)):(l&&(g=new kUtil.Matrix(0,Math.sign(l.b),Math.sign(l.c),0,0,0)),n&&(e.left=1==g.b?e.left+n.top*k.width:e.left+(1-n.top-n.height)*k.width,e.top=1==g.c?e.top+n.left*k.height:e.top+
(1-n.left-n.width)*k.height,e.width*=n.height,e.height*=n.width));k=p[y];k=Math.pow(10,Math.ceil(Math.max(k.kPainterWidth,k.kPainterHeight)).toString().length+2);e.left=Math.round(e.left*k)/k;e.top=Math.round(e.top*k)/k;e.width=Math.round(e.width*k)/k;e.height=Math.round(e.height*k)/k;f={crop:e,transform:g,srcBlob:f.srcBlob,saveFormat:f.saveFormat};B.push(f);++t;f.srcBlob&&(A[A.length-1].endStep=t+1)}};a.undo=function(){return new Promise(function(a,g){if(!J)return g(Error("`undo()`: The function is invalid in current mode."));
if(0<t){for(var f=t-1;null==B[f];)--f;ea(t,f,function(){return a()})}})};a.redo=function(){return new Promise(function(a,g){if(!J)return g(Error("`undo()`: The function is invalid in current mode."));if(t<B.length-1){for(var f=t+1;null==B[f];)++f;ea(t,f,function(){return a()})}})};a.getStepCount=function(){return J?B.length:NaN};a.getCurStep=function(){return J?t:NaN};a.setCurStep=function(a){return new Promise(function(g,f){if(1>arguments.length||isNaN(a))return f(Error("`setCurStep(index)`: The parameter `index` is invalid."));
a=Math.round(a);if(0>a||a>=B.length||null==B[a])return f(Error("`setCurStep(index)`: The parameter `index` is invalid."));ea(t,a,function(){return g()})})};h.needAlwaysTrueTransform=!1;var ea=function(a,p,f){t=p;p=B[a].crop;var e=B[t].crop;p.left==e.left&&p.top==e.top&&p.width==e.width&&p.bottom==e.bottom&&B[a].srcBlob==B[t].srcBlob?(g(n).setTransform(B[t].transform.dot(B[a].transform.inversion()).dot(g(n).getTransform())),fa.setImgStyleFit(),f&&f()):ga(h.needAlwaysTrueTransform,!1,f)},Z=function(h){g(n).siblings().hide();
ga(!1,!1,function(){a.isAutoShowCropUI&&I.showCropRect();h&&h()})},Q;Q=Math.min(screen.width,screen.height)*(window.devicePixelRatio||1);var ga=h.updateCvsAsync=function(a,h,f){g(n).hide();var e=B[t],k=e.srcBlob||p[y].kPainterOriBlob,l=function(){var g=URL.createObjectURL(k),l=new Image;l.onload=l.onerror=function(){l.onload=l.onerror=null;ca(l,e,a,h);URL.revokeObjectURL(g);f&&f()};l.src=g};window.createImageBitmap?createImageBitmap(k).then(function(k){ca(k,e,a,h);f&&f()})["catch"](function(){l()}):
l()},ca=function(h,p,f,e){a._noAnyUseButForIosSafariBug0=h.naturalWidth;a._noAnyUseButForIosSafariBug1=h.naturalHeight;var k=h.naturalWidth||h.width,l=h.naturalHeight||h.height,v=p.crop;p=p.transform;var m=n.getContext("2d"),r=n.fullQualityWidth=Math.round(k*v.width)||1,E=n.fullQualityHeight=Math.round(l*v.height)||1,t=!1;0!=p.a*p.d&&0==p.b*p.c?(n.fullQualityWidth=r,n.fullQualityHeight=E):(n.fullQualityWidth=E,n.fullQualityHeight=r,f&&(t=!0));n.hasCompressed=!1;if(f){var H,u;t?(H=E,u=r):(H=r,u=E);
n.width=H;n.height=u;m.setTransform(p.a,p.b,p.c,p.d,H/2*(1-p.a-p.c),u/2*(1-p.b-p.d))}else r>Q||E>Q?(H=Q/Math.max(r,E),n.width=Math.round(r*H)||1,n.height=Math.round(E*H)||1,n.hasCompressed=!0):(n.width=r,n.height=E);H=Math.round(k*v.left);v=Math.round(l*v.top);H==k&&--H;v==l&&--v;t?(k=n.height,l=n.width):(k=n.width,l=n.height);if(2>=r/k)m.drawImage(h,H,v,r,E,0,0,k,l);else{t=document.createElement("canvas");t.width=Math.round(r/2);t.height=Math.round(E/2);u=t.getContext("2d");var w=Math.round(r/2),
d=Math.round(E/2);for(u.drawImage(h,H,v,r,E,0,0,w,d);;){h=w;r=d;w=Math.round(h/2);d=Math.round(r/2);if(w<=k||d<=l)break;u.drawImage(t,0,0,h,r,0,0,w,d)}m.drawImage(t,0,0,h,r,0,0,k,l)}f?g(n).setTransform(new kUtil.Matrix(1,0,0,1,0,0)):g(n).setTransform(p);e||(fa.setImgStyleFit(),g(n).show())};a.enterEdit=function(){return new Promise(function(a,g){if(J)return g(Error("`enterEdit()`: The function is invalid in current mode."));if(-1==y)return g(Error("`enterEdit()`: There is no image in the instance."));
S="";r();J=!0;var f=p[y].kPainterProcess||{crop:{left:0,top:0,width:1,height:1},transform:new kUtil.Matrix(1,0,0,1,0,0),srcBlob:null,saveFormat:null};B.push(f);t=0;Z(function(){K();L=F=null;S="basicEdit";return a()})})};var aa=a.cancelEdit=function(){if(!J)return!1;J=!1;B.length=0;A.length=0;O.showImg(y);g(n).hide();I.hideCropRect();da.hideFreeTransformBorderDirectly();L=F=null;S="view";return!0},R=function(a,h){var f=B[t].crop,e=B[t].transform,k=B[0].crop,l=B[0].transform,v=p[y];if(B[t].srcBlob||
l.a!=e.a||l.b!=e.b||l.c!=e.c||l.d!=e.d||Math.round(v.kPainterOriWidth*f.left)!=Math.round(v.kPainterOriWidth*k.left)||Math.round(v.kPainterOriHeight*f.top)!=Math.round(v.kPainterOriHeight*k.top)||Math.round(v.kPainterOriWidth*(f.left+f.width))!=Math.round(v.kPainterOriWidth*(k.left+k.width))||Math.round(v.kPainterOriHeight*(f.top+f.height))!=Math.round(v.kPainterOriHeight*(k.top+k.height))){URL.revokeObjectURL(v.src);var m=new Image,f=function(){m.onload=m.onerror=function(){m.onload=m.onerror=null;
h?(g(p[y]).remove(),p.splice(y,1,m)):p.splice(++y,0,m);u.children(".kPainterImgsDiv").append(m);a&&a()};w(n,B[t].saveFormat||v.kPainterSaveFormat).then(function(a){m.kPainterBlob=a;m.kPainterWidth=n.width;m.kPainterHeight=n.height;B[t].srcBlob?(m.kPainterOriBlob=a,m.kPainterOriWidth=n.width,m.kPainterOriHeight=n.height,m.kPainterSaveFormat=B[t].saveFormat):(m.kPainterOriBlob=v.kPainterOriBlob,m.kPainterOriWidth=v.kPainterOriWidth,m.kPainterOriHeight=v.kPainterOriHeight,m.kPainterProcess=B[t],m.kPainterSaveFormat=
v.kPainterSaveFormat);a=URL.createObjectURL(a);m.src=a})};n.hasCompressed||1!=e.a||0!=e.b||0!=e.c||1!=e.d||0!=e.e||0!=e.f?(g(n).hide(),ga(!0,!0,f)):f()}else a()},T=!1;a.saveEdit=function(h){return new Promise(function(n,f){if(!J||T)return f(Error("`saveEdit(isCover)`: The function is invalid in current mode."));S="";T=!0;r();setTimeout(function(){R(function(){aa();K();T=!1;L=F=null;try{(function(){for(var e=0;e<O.thumbnailBoxArr.length;++e){var f=O.thumbnailBoxArr[e],l=p[y];a._noAnyUseButForIosSafariBug0=
l.naturalWidth;a._noAnyUseButForIosSafariBug1=l.naturalHeight;var n=Math.min(f.kPainterMaxWH/l.naturalWidth,f.kPainterMaxWH/l.naturalHeight,1),m;h?(m=g(f.kPainterThumbBoxArr[y]),m=m.hasClass("kPainterThumbnailCanvas")?m[0]:m.find(".kPainterThumbnailCanvas")[0]):(m=document.createElement("canvas"),m.className="kPainterThumbnailCanvas");m.width=Math.round(l.naturalWidth*n);m.height=Math.round(l.naturalHeight*n);m.getContext("2d").drawImage(l,0,0,m.width,m.height);if(!h){l=f.kPainterFunWrap;n=null;try{n=
l?l(m):m}catch(M){return setTimeout(function(){throw M;},0),!1}n&&(n.getKPainterIndex=function(){return f.kPainterThumbBoxArr.indexOf(this)},f.kPainterThumbBoxArr.splice(y,0,n),g(f.kPainterThumbBoxArr[y-1]).after(n))}}})()}catch(e){setTimeout(function(){throw e;},0)}S="view";return n()},h)},100)})};a.rotateRight=function(){if(!J)return!1;var a=g(n).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(0,1,-1,0,0,0),a);g(n).setTransform(a);N({transform:a});a=n.fullQualityWidth;n.fullQualityWidth=n.fullQualityHeight;
n.fullQualityHeight=a;fa.setImgStyleFit();return!0};a.rotateLeft=function(){if(!J)return!1;var a=g(n).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(0,-1,1,0,0,0),a);g(n).setTransform(a);N({transform:a});a=n.fullQualityWidth;n.fullQualityWidth=n.fullQualityHeight;n.fullQualityHeight=a;fa.setImgStyleFit();return!0};a.mirror=function(){if(!J)return!1;var a=g(n).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(-1,0,0,1,0,0),a);g(n).setTransform(a);N({transform:a});fa.setImgStyleFit();return!0};
a.flip=function(){if(!J)return!1;var a=g(n).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(1,0,0,-1,0,0),a);g(n).setTransform(a);N({transform:a});fa.setImgStyleFit();return!0};a.resize=function(a,g){return new Promise(function(f,e){if(!J)return e(Error("`resize`: The function is invaild in this mode."));a=parseInt(a);g=parseInt(g);if(a!==a||1>a)return e(Error("`resize`: The parameter `newWidth` is invaild."));if(g!==g||1>g)return e(Error("`resize`: The parameter `newHeight` is invaild."));r();
h.updateCvsAsync(!0,!0,function(){h.needAlwaysTrueTransform=!0;for(var e=a,l=g;2*e<n.width;)e*=2;for(;2*l<n.height;)l*=2;for(var p=n,m;;){m=document.createElement("canvas");m.width=e;m.height=l;m.getContext("2d").drawImage(p,0,0,e,l);var r=!1;a!=e&&(e/=2,r=!0);g!=l&&(l/=2,r=!0);if(!r)break}w(m).then(function(a){h.pushStack({srcBlob:a,saveFormat:"image/jpeg"});h.updateCvs(!1,!1,function(){h.needAlwaysTrueTransform=!1;K();return f()})})})})};a.getEditWidth=function(){return J?n.fullQualityWidth:NaN};
a.getEditHeight=function(){return J?n.fullQualityHeight:NaN}},I=new function(){var h=this;a.isAutoShowCropUI=!0;var p=u.children(".kPainterCroper");h.isCropRectShowing=!1;a.showCropRect=h.showCropRect=function(){J&&(h.isCropRectShowing=!0,P(),p.show())};a.hideCropRect=h.hideCropRect=function(){h.isCropRectShowing=!1;p.hide()};p.css({"border-left-width":"100000px","border-top-width":"100000px","border-right-width":"100000px","border-bottom-width":"100000px",left:"-100000px",top:"-100000px",right:"-100000px",
bottom:"-100000px"});a.setCropRectStyle=function(a){switch(parseInt(a)){case 0:return p.find(">.kPainterBigMover").hide(),p.find(">.kPainterMover").show(),!0;case 1:return p.find(">.kPainterMover").hide(),p.find(">.kPainterBigMover").show(),!0;default:return!1}};var r=void 0;a.setCropRectWidthHeightRate=function(a){r=a;h.isCropRectShowing&&w()};var w=function(){if(r){var a=k/l;a>r?(a=k,k=l*r,f+=(a-k)/2,la()):a<r&&(a=l,l=k/r,e+=(a-l)/2,la())}},A,y,K,I,Q,O,S,aa,R,T,V,G,f,e,k,l,v,m,M,E;a.cropRectMinW=
50;a.cropRectMinH=50;var oa=function(){"crop"==L&&(L=F=null,w())},H=function(){O=u.contentBoxRect();var a=g(n).getTransform(),d=parseFloat(n.style.left)+1E5,h=parseFloat(n.style.top)+1E5;0!=a.a*a.d&&0==a.b*a.c?(V=parseFloat(n.style.width),G=parseFloat(n.style.height)):(V=parseFloat(n.style.height),G=parseFloat(n.style.width));var a=V/2,r=G/2;S=d-a;aa=h-r;R=d+a;T=h+r;k=parseFloat(p[0].style.width);l=parseFloat(p[0].style.height);f=parseFloat(p[0].style.left)-k/2+1E5;e=parseFloat(p[0].style.top)-l/
2+1E5;v=Math.max(-O.width/2,S);m=Math.max(-O.height/2,aa);M=Math.min(O.width/2,R);E=Math.min(O.height/2,T)};u.find("> .kPainterCroper > .kPainterEdges > div, > .kPainterCroper > .kPainterCorners > div, > .kPainterCroper > .kPainterMover, > .kPainterCroper > .kPainterBigMover").on("touchstart touchcancel touchend mousedown",function(a){a.preventDefault();var d=a.originalEvent.targetTouches;if(!d){if(!F)F="mouse";else if("mouse"!=F)return;d=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if(d.length)if(!F)F=
"touch";else if("touch"!=F)return;1==d.length?null==L&&(L="crop",K=d[0].identifier,A=d[0].pageX,y=d[0].pageY,a=g(this).attr("data-orient").split(","),I=a[0],Q=a[1],H()):0==d.length&&oa()});u.on("mouseup",function(){"mouse"==F&&oa()});u.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&oa()});a.onCropRectChange=null;var la=function(){p[0].style.left=f+k/2-1E5+"px";p[0].style.right=-f-k/2-1E5+"px";p[0].style.top=e+l/2-1E5+"px";p[0].style.bottom=-e-l/2-1E5+"px";p[0].style.width=k+"px";
p[0].style.height=l+"px";N(a.onCropRectChange)};u.on("touchmove mousemove",function(d){d.preventDefault();var g=d.originalEvent.targetTouches;if(!g){if("mouse"!=F)return;g=[{pageX:d.originalEvent.clientX,pageY:d.originalEvent.clientY}]}else if("touch"!=F)return;if(1==g.length&&"crop"==L&&K==g[0].identifier){var h=A;d=y;A=g[0].pageX;y=g[0].pageY;g=A-h;d=y-d;if(0==I&&0==Q)f+g<v?g=v-f:f+k+g>M&&(g=M-k-f),e+d<m?d=m-e:e+l+d>E&&(d=E-l-e),f+=g,e+=d;else if(r){var n,p,H,h=function(){k+n<a.cropRectMinW&&(n=
a.cropRectMinW-k);l+n<a.cropRectMinW&&(n=a.cropRectMinW-l);-1==I?f-n<v&&(n=f-v):1==I?f+k+n>M&&(n=M-k-f):(f-n/2<v&&(n=2*(f-v)),f+k+n/2>M&&(n=2*(M-k-f)));-1==Q?e-n<m&&(n=e-m):1==Q?e+l+n>E&&(n=E-l-e):(e-n/2<m&&(n=2*(e-m)),e+l+n/2>E&&(n=2*(E-l-e)));H=2*n/(r+1);p=H*r};-1==I&&-1==Q?(n=(-g+-d)/2,h(),f-=p,e-=H,k+=p,l+=H):1==I&&-1==Q?(n=(g+-d)/2,h(),e-=H,k+=p,l+=H):1==I&&1==Q?(n=(g+d)/2,h(),k+=p,l+=H):-1==I&&1==Q?(n=(-g+d)/2,h(),f-=H,k+=p,l+=H):-1==Q?(n=-d,h(),f-=p/2,e-=H,k+=p,l+=H):1==I?(n=g,h(),e-=n/2,k+=
p,l+=H):1==Q?(n=d,h(),f-=p/2,k+=p,l+=H):-1==I&&(n=-g,h(),f-=p,e-=H/2,k+=p,l+=H)}else-1==I?(k-g<a.cropRectMinW&&(g=k-a.cropRectMinW),f+g<v&&(g=v-f),k-=g,f+=g):1==I&&(k+g<a.cropRectMinW&&(g=-k+a.cropRectMinW),f+k+g>M&&(g=M-k-f),k+=g),-1==Q?(l-d<a.cropRectMinH&&(d=l-a.cropRectMinH),e+d<m&&(d=m-e),l-=d,e+=d):1==Q&&(l+d<a.cropRectMinH&&(d=-l+a.cropRectMinH),e+l+d>E&&(d=E-l-e),l+=d);la()}});var P=a.setCropRectArea=function(a,d,g,n){if(!h.isCropRectShowing)return!1;-.5<=a||(a=-.5);-.5<=d||(d=-.5);.5>=g||
(g=.5);.5>=n||(n=.5);a>g&&(a=g=(a+g)/2);d>n&&(d=n=(d+n)/2);H();f=S+(a+.5)*V;f<v&&(f=v);e=aa+(d+.5)*G;e<m&&(e=m);a=S+(g+.5)*V;a>M&&(a=M);k=a-f;n=aa+(n+.5)*G;n>E&&(n=E);l=n-e;r&&w();la();return!0},d=a.getCropRectArea=function(a){if(!h.isCropRectShowing)return null;var d=g(n).getTransform();(0!=d.a*d.d&&0==d.b*d.c?parseFloat(n.style.width):parseFloat(n.style.height))!=V&&H();var d=(f-S)/V-.5,m=(e-aa)/G-.5,p=d+k/V,E=m+l/G;a&&(d=Math.round(d*n.fullQualityWidth*2)/2,m=Math.round(m*n.fullQualityHeight*2)/
2,p=Math.round(p*n.fullQualityWidth*2)/2,E=Math.round(E*n.fullQualityHeight*2)/2);return[d,m,p,E]};h.getNeededRect=function(){H();var a={};a.width=2*Math.max(-f,f+k);a.height=2*Math.max(-e,e+l);return a};a.crop=function(a){return new Promise(function(e,f){if(!J)return f(Error("crop([ltrb])`: The function is invalid in this mode."));H();a=a||d();if(!a)return f(Error("crop([ltrb])`: No thing can be cropped."));var g=a[0],k=a[1],h=a[2],l=a[3];if(.5>(g+.5)*n.fullQualityWidth&&.5>=(.5-h)*n.fullQualityWidth&&
.5>(k+.5)*n.fullQualityHeight&&.5>=(.5-l)*n.fullQualityHeight)return e([g,k,h,l]);D.pushStack({crop:{left:g+.5,top:k+.5,width:h-g,height:l-k}});D.updateCvsAsync(D.needAlwaysTrueTransform,!1,function(){return e([g,k,h,l])})})}},da=new function(){var h=this;(function(){var p=Math.PI/180,B=Math.PI/6,A=Math.PI/18,y=function(a){var e=n.width,f=n.height,h;e>f?e>a&&(h=a/e,e=a,f=Math.round(f*h)||1):f>a&&(h=a/f,f=a,e=Math.round(e*h)||1);a=g(n).getTransform();var m;0!=a.a*a.d&&0==a.b*a.c?(h=e,m=f):(h=f,m=e);
var p=document.createElement("canvas");p.width=h;p.height=m;p=p.getContext("2d");p.setTransform(a.a,a.b,a.c,a.d,h/2*(1-a.a-a.c),m/2*(1-a.b-a.d));p.drawImage(n,0,0,e,f);return p.getImageData(0,0,h,m)},z=function(e,f,g){if("string"==typeof e||e instanceof String||e instanceof Blob)O.getBlobAndFormatFromAnyImgData(e,function(a){a?ca(a).then(function(a){z(a,f,g)}):g(null)});else if(e instanceof Image)try{a._noUseButTestSrc=e.src}catch(H){setTimeout(function(a){throw a;},0);g(null);return}else if(e instanceof
ImageData){if(e.width<=f&&e.height<=f){setTimeout(function(){g(e)},0);return}var h=e;e=document.createElement("canvas");e.width=h.width;e.height=h.height;e.getContext("2d").putImageData(h,e.width,e.height)}var k=document.createElement("canvas"),h=e.naturalWidth||e.videoWidth||e.width,l=e.naturalHeight||e.videoHeight||e.height,n=1;h>l?h>f&&(n=f/h,h=f,l=Math.round(l*n)||1):l>f&&(n=f/l,l=f,h=Math.round(h*n)||1);k.width=h;k.height=l;var p=k.getContext("2d");p.drawImage(e,0,0,k.width,k.height);setTimeout(function(){g(p.getImageData(0,
0,k.width,k.height))},0)};a.documentDetect=function(a){return new Promise(function(e,f){if(!a){if("freeTransform"!=S)return f(Error("`documentDetect`: The function is only valid in `freeTransform` mode."));r()}var g=KPainter._cv;z(a||y(256),256,function(f){var h=new g.matFromArray(f,g.CV_8UC4);f=h.cols;var k=h.rows,l=Math.min(h.cols,h.rows);g.cvtColor(h,h,g.ColorConversionCodes.COLOR_RGBA2GRAY.value,0);var m=new g.Mat;g.GaussianBlur(h,m,[5,5],0,0,g.BORDER_DEFAULT);g.delMat(h);h=new g.Mat;g.Canny(m,
h,8,.5*l,3,!1);g.delMat(m);var n=new g.Mat;g.HoughLinesP(h,n,1,p,8,8,3);g.delMat(h);for(var r=n.data32s(),d=[],h=f/2,v=k/2,m=0;m<r.length;m+=2)d.push(r[m]-h),d.push(r[m+1]-v);g.delMat(n);for(var t=[],m=0;m<d.length;m+=4){var n=d[m+0],u=d[m+1],w=d[m+2],G=d[m+3],y=u-G,D=w-n,r=n*G-w*u;if(0!=r){var z=0>r?-1:1,F=Math.sqrt(y*y+D*D),y=y/F*z,D=D/F*z,r=r/F*z,z=Math.atan(y/D),F=Math.abs(z);F>B&&F<Math.PI/2-B||(0>D?0==y?(D=-1,z=0):z=-z:0<D?0>y?z=-Math.PI-z:0<y?z=Math.PI-z:(D=1,z=Math.PI):0<y?(y=1,z=Math.PI/
2):(y=-1,z=-Math.PI/2),n=Math.sqrt((w-n)*(w-n)+(G-u)*(G-u)),t.push([y,D,r,z,n]))}}m=[];d=[];ea(t,m,2,A,.7*l);ea(m,d,2,A,.7*l);l=[null,null,null,null];for(m=0;m<d.length;++m)t=d[m],z=t[3],u=z<3*-Math.PI/4?0:z<-Math.PI/4?1:z<Math.PI/4?2:z<3*Math.PI/4?3:0,l[u]?(n=l[u],z=n[2],y=n[4],r=t[2],n=t[4],r*n>z*y&&(l[u]=t)):l[u]=t;for(m=0;m<l.length;++m)t=l[m],null==t&&(t=[],l[m]=t,0==m?(t[2]=v,t[3]=Math.PI):1==m?(t[2]=h,t[3]=-Math.PI/2):2==m?(t[2]=v,t[3]=0):3==m&&(t[2]=h,t[3]=Math.PI/2)),t[0]=Math.sin(t[3]),
t[1]=-Math.cos(t[3]);h=[];for(m=0;m<l.length;++m)d=l[m],n=l[(m-1+l.length)%l.length],v=d[0],r=d[1],d=d[2],t=n[0],u=n[1],z=n[2],n=(r*z-u*d)/(u*v-r*t),u=(v*z-t*d)/(t*r-v*u),h.push([n/f,u/k]);a||(ga(h),K());e(h)})})};var ea=function(a,f,g,h,m){for(var e=0;e<a.length;++e){for(var k=a[e],l=!1,n=0;n<f.length;++n){var p=f[n],r=p[3],d=k[3],t=r-d;t>Math.PI?d+=2*Math.PI:t<-Math.PI&&(d-=2*Math.PI);t=Math.abs(p[2]-k[2]);if(Math.abs(r-d)<h&&t<g){var l=!0,t=p[4],v=k[4],n=t+v;p[2]=(p[2]*t+k[2]*v)/n;r=(r*t+d*v)/
n;r>Math.PI?r-=2*Math.PI:r<=-Math.PI&&(r+=2*Math.PI);p[3]=r;p[4]=Math.min(n,m);break}}l||f.push([null,null,k[2],k[3],k[4]])}},Z=u.children(".kPainterPerspect");h.hideFreeTransformBorderDirectly=function(){Z.hide()};var Q=u.find("> .kPainterPerspect > .kPainterPerspectCvs")[0];a.onFreeTransformCornerPosChange=null;var ga=a.setFreeTransformCornerPos=function(a){if("freeTransform"==S){var e=n.kPainterZoom,f=g(n).getTransform(),h=n.width*e,e=n.height*e;if(0==f.a*f.d||0!=f.b*f.c)f=h,h=e,e=f;for(var m=
u.borderBoxRect(),f=m.width/2-5,m=m.height/2-5,p=0;p<R.length;++p){var r=R[p],t=g(r).attr("data-index"),w=a[t],t=h*w[0],w=e*w[1];t<-f?t=-f:t>f&&(t=f);w<-m?w=-m:w>m&&(w=m);r.style.left=t+"px";r.style.right=-t+"px";r.style.top=w+"px";r.style.bottom=-w+"px"}aa();Z.show()}},da=a.getFreeTransformCornerPos=function(){var a=n.kPainterZoom,f=g(n).getTransform(),h=n.width*a,a=n.height*a;if(0==f.a*f.d||0!=f.b*f.c)f=h,h=a,a=f;for(var f=[],p=0;p<R.length;++p){var m=R[p];f.push([parseFloat(m.style.left)/h,parseFloat(m.style.top)/
a])}return f},aa=function(){var e=u.borderBoxRect();Q.width=Math.round(e.width);Q.height=Math.round(e.height);for(var f=[],g=0;g<R.length;++g)f.push([Math.round(parseFloat(R[g].style.left)+e.width/2),Math.round(parseFloat(R[g].style.top)+e.height/2)]);for(var e=Q.getContext("2d"),h=Number.POSITIVE_INFINITY,m,g=0;4>g;++g){var n=f[g][0]*f[g][0]+f[g][1]*f[g][1];n<h&&(h=n,m=g)}for(var p=[],g=0;4>g;++g)p.push([f[(m+g)%4][0],f[(m+g)%4][1]]);e.fillStyle="rgba(0,0,0,0.3)";e.beginPath();e.moveTo(0,0);e.lineTo(p[0][0],
p[0][1]);m=function(a,e,f,g,d,h,k,l){return[Math.sign((g-e)*d+(a-f)*h+f*e-a*g),Math.sign((g-e)*k+(a-f)*l+f*e-a*g)]};f=[];for(g=0;4>g;++g)f.push(m(p[g][0],p[g][1],p[(g+1)%4][0],p[(g+1)%4][1],p[(g+2)%4][0],p[(g+2)%4][1],p[(g+3)%4][0],p[(g+3)%4][1]));g=function(a,e,f,g,d,h,k,l){var m=g-e,n=a-f;a=f*e-a*g;e=l-h;f=d-k;d=k*h-d*l;h=n*e-f*m;return[(a*f-d*n)/h,(d*m-a*e)/h]};m=void 0;h=function(){var a,e,f=p[1][0]-p[0][0];f&&(a=(p[1][1]-p[0][1])/f);var g=p[3][0]-p[0][0];g&&(e=(p[3][1]-p[0][1])/g);return 0<f?
0<g?a<=e:!0:0==f?0<g?!1:!0:0<=g?!1:a<=e}();0>f[0][0]*f[0][1]?0>f[2][0]*f[2][1]&&(m=g(p[0][0],p[0][1],p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]),h?(e.lineTo(m[0],m[1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[1][0],p[1][1]),e.lineTo(m[0],m[1]),e.lineTo(p[3][0],p[3][1])):(e.lineTo(p[3][0],p[3][1]),e.lineTo(m[0],m[1]),e.lineTo(p[1][0],p[1][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(m[0],m[1]))):0>f[1][0]*f[1][1]&&0>f[3][0]*f[3][1]&&(m=g(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1],p[0][0],p[0][1]),
h?(e.lineTo(p[1][0],p[1][1]),e.lineTo(m[0],m[1]),e.lineTo(p[3][0],p[3][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(m[0],m[1])):(e.lineTo(m[0],m[1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[3][0],p[3][1]),e.lineTo(m[0],m[1]),e.lineTo(p[1][0],p[1][1])));m||(h?(e.lineTo(p[1][0],p[1][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[3][0],p[3][1])):(e.lineTo(p[3][0],p[3][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[1][0],p[1][1])));e.lineTo(p[0][0],p[0][1]);e.lineTo(0,0);e.lineTo(0,Q.height);e.lineTo(Q.width,Q.height);e.lineTo(Q.width,
0);e.lineTo(0,0);e.fill();N(a.onFreeTransformCornerPosChange)},R=u.find("> .kPainterPerspect > .kPainterPerspectCorner");R.css("left","0");R.css("top","0");R.css("right","0");R.css("bottom","0");var T=null,V,G,f;R.on("touchstart touchcancel touchend mousedown",function(a){f=this;a.preventDefault();var e=a.originalEvent.targetTouches;if(!e){if(!F)F="mouse";else if("mouse"!=F)return;e=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if(e.length)if(!F)F="touch";else if("touch"!=F)return;
a=function(){var a=Z.width()/2-5,e=Z.height()/2-5,g=parseFloat(f.style.left),h=parseFloat(f.style.top),k=!0,n=!0;g<-a?g=-a:g>a?g=a:k=!1;h<-e?h=-e:h>e?h=e:n=!1;k&&(f.style.left=g+"px",f.style.right=-g+"px");n&&(f.style.top=h+"px",f.style.bottom=-h+"px");(k||n)&&aa()};1==e.length?("perspect"==L&&(L="perspectCornerMoving"),a(),T=e[0].identifier,V=e[0].pageX,G=e[0].pageY):0==e.length&&"perspectCornerMoving"==L&&(a(),F=null,L="perspect")});u.on("touchmove mousemove",function(a){a.preventDefault();var e=
a.originalEvent.targetTouches;if(!e){if("mouse"!=F)return;e=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if("touch"!=F)return;if(1==e.length&&"perspectCornerMoving"==L&&T==e[0].identifier){var g=V;a=G;V=e[0].pageX;G=e[0].pageY;e=V-g;a=G-a;e=parseFloat(f.style.left)+e;a=parseFloat(f.style.top)+a;f.style.left=e+"px";f.style.right=-e+"px";f.style.top=a+"px";f.style.bottom=-a+"px";aa()}});u.on("mouseup",function(){"mouse"==F&&"perspectCornerMoving"==L&&(F=null,L="perspect")});
u.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&"perspectCornerMoving"==L&&(F=null,L="perspect")});a.freeTransformMaxWH=2048;a.freeTransform=function(e,f){return new Promise(function(g,h){if(!f&&"freeTransform"!=S)return h(Error("`freeTransform`: The function is only valid in `freeTransform` mode."));r();var k=KPainter._cv,l=e=e||da();.005>Math.abs(l[0][0]-.5)&&.005>Math.abs(l[0][1]-.5)&&.005>Math.abs(l[1][0]+.5)&&.005>Math.abs(l[1][1]-.5)&&.005>Math.abs(l[2][0]+.5)&&.005>Math.abs(l[2][1]+
.5)&&.005>Math.abs(l[3][0]-.5)&&.005>Math.abs(l[3][1]+.5)?(K(),f?g(null):g()):z(f||y(a.freeTransformMaxWH),a.freeTransformMaxWH,function(a){a=new k.matFromArray(a,k.CV_8UC4);k.cvtColor(a,a,k.ColorConversionCodes.COLOR_RGBA2RGB.value,0);for(var h=new k.Mat.zeros(4,1,k.CV_32FC2),l=h.data32f(),m=0;m<e.length;++m){var p=e[m];l[2*m]=Math.round((p[0]+.5)*a.cols);l[2*m+1]=Math.round((p[1]+.5)*a.rows)}var d=l[2]-l[0],r=l[3]-l[1],p=l[4]-l[2],m=l[5]-l[3],t=l[6]-l[4],u=l[7]-l[5],v=l[0]-l[6],y=l[1]-l[7],l=Math.round(Math.max(Math.sqrt(d*
d+r*r),Math.sqrt(t*t+u*u))),p=Math.round(Math.max(Math.sqrt(p*p+m*m),Math.sqrt(v*v+y*y))),v=new k.Mat.zeros(4,1,k.CV_32FC2),m=v.data32f();m[2]=l;m[4]=l;m[5]=p;m[7]=p;m=k.getPerspectiveTransform(h,v);k.delMat(h);k.delMat(v);h=new k.Mat.zeros(p,l,k.CV_8UC3);v=new k.Scalar(0,255,0);k.warpPerspective(a,h,m,[h.rows,h.cols],k.InterpolationFlags.INTER_LINEAR.value,k.BORDER_CONSTANT,v);k.delMat(a);k.delMat(m);k.delMat(v);a=new ImageData(l,p);v=h.channels();d=h.data();for(r=m=0;m<d.length;m+=v,r+=4)a.data[r]=
d[m],a.data[r+1]=d[m+1%v],a.data[r+2]=d[m+2%v],a.data[r+3]=255;k.delMat(h);n.width=l;n.height=p;n.getContext("2d").putImageData(a,0,0);fa.setImgStyleFit();w(n,"image/jpeg").then(function(a){f?g(a):(D.pushStack({srcBlob:a,saveFormat:"image/jpeg"}),D.updateCvsAsync(!0,!1,function(){ga([[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]]);L="perspect";K();g()}))})})})};a.enterFreeTransformMode=function(){return new Promise(function(a,f){if(!J)return f(Error("`enterFreeTransformMode`: The function is only valid in edit mode."));
if(!KPainter.cvHasLoaded)return f(Error("`enterFreeTransformMode`: You should call `KPainter.loadCvScript()` first before use this function."));S="";F=null;L="perspect";r();setTimeout(function(){I.hideCropRect();D.updateCvsAsync(!0,!1,function(){ga([[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]]);Z.show();K();D.needAlwaysTrueTransform=!0;S="freeTransform";a()})},0)})};a.exitFreeTransformMode=function(){return new Promise(function(e,f){if("freeTransform"!=S)return f(Error("`exitFreeTransformMode`: It is not in `freeTransform` mode."));
S="";Z.hide();D.updateCvsAsync(!1,!1,function(){a.isAutoShowCropUI&&I.showCropRect();L=F=null;D.needAlwaysTrueTransform=!1;S="basicEdit";e()})})}})()};new function(){a.videoHtmlElement=g('<div class="kPainterVideoMdl" style="display:none;"><video class="kPainterVideo" webkit-playsinline="true"></video><select class="kPainterCameraSelect"></select><select class="kPainterResolutionSelect"><option class="kPainterGotResolutionOpt" value="got" selected></option><option data-width="3840" data-height="2160">ask 3840 x 2160</option><option data-width="1920" data-height="1080">ask 1920 x 1080</option><option data-width="1600" data-height="1200">ask 1600 x 1200</option><option data-width="1280" data-height="720">ask 1280 x 720</option><option data-width="800" data-height="600">ask 800 x 600</option><option data-width="640" data-height="480">ask 640 x 480</option><option data-width="640" data-height="360">ask 640 x 360</option></select><button class="kPainterBtnGrabVideo"><svg width="48" viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1024 672q119 0 203.5 84.5t84.5 203.5-84.5 203.5-203.5 84.5-203.5-84.5-84.5-203.5 84.5-203.5 203.5-84.5zm704-416q106 0 181 75t75 181v896q0 106-75 181t-181 75h-1408q-106 0-181-75t-75-181v-896q0-106 75-181t181-75h224l51-136q19-49 69.5-84.5t103.5-35.5h512q53 0 103.5 35.5t69.5 84.5l51 136h224zm-704 1152q185 0 316.5-131.5t131.5-316.5-131.5-316.5-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5z"/></svg></button><button class="kPainterBtnCloseVideo"><svg width="48" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg></button></div>')[0];
a.videoSettings={video:{facingMode:{ideal:"environment"}}};a.beforeAddImgFromGrabVideoBtn=null;a.afterAddImgFromGrabVideoBtn=null;a.grabVideo=null;a.hideVideo=null;a.showVideo=function(h){a.hideVideo&&a.hideVideo();var n=g(a.videoHtmlElement).find(".kPainterVideo")[0],p=g(a.videoHtmlElement).find(".kPainterCameraSelect")[0],r=g(a.videoHtmlElement).find(".kPainterResolutionSelect")[0],u=g(a.videoHtmlElement).find(".kPainterGotResolutionOpt")[0],w=g(a.videoHtmlElement).find(".kPainterBtnGrabVideo")[0],
y=g(a.videoHtmlElement).find(".kPainterBtnCloseVideo")[0],A=function(){return p?navigator.mediaDevices.enumerateDevices().then(function(a){var f=p.value;p.innerHTML="";for(var e=void 0,g=0;g<a.length;++g){var h=a[g];if("videoinput"==h.kind){var r=document.createElement("option");r.value=h.deviceId;r.innerText=h.label||"camera "+g;p.appendChild(r);f==h.deviceId&&(e=r)}}var m=p.childNodes;if(!e&&m.length)try{n.srcObject.getTracks().forEach(function(a){if("video"==a.kind)for(var f=0;f<m.length;++f){var g=
m[f];if(a.label==g.innerText)throw e=g,"found the using source";}})}catch(M){self.kConsoleLog&&self.kConsoleLog(M)}e&&(p.value=e.value)}):Promise.reject("no camera select")},z=function(){n.srcObject&&(self.kConsoleLog&&self.kConsoleLog("======stop video========"),n.srcObject.getTracks().forEach(function(a){a.stop()}))},D=function(t){return new Promise(function(f,e){z();self.kConsoleLog&&self.kConsoleLog("======before video========");var k=h?h:a.videoSettings,l=r?g(r).children(":selected")[0]:null;
if(l&&l.hasAttribute("data-width")){var v=l.getAttribute("data-width"),l=l.getAttribute("data-height");u.setAttribute("data-width",v);u.setAttribute("data-height",l);/Safari/.test(navigator.userAgent)&&/iPhone/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?1280<=v?k.video.width=1280:640<=v?k.video.width=640:320<=v&&(k.video.width=320):(k.video.width={ideal:v},k.video.height={ideal:l});!t&&(v=g(p).children(":selected")[0])&&(t=v.value);t&&(k.video.facingMode=void 0,k.video.deviceId=
{exact:t})}var m=!1,w=function(){self.kConsoleLog&&self.kConsoleLog("======try getUserMedia========");self.kConsoleLog&&self.kConsoleLog("ask "+JSON.stringify(k.video.width)+"x"+JSON.stringify(k.video.height));navigator.mediaDevices.getUserMedia(k).then(function(a){self.kConsoleLog&&self.kConsoleLog("======get video========");return new Promise(function(e,f){n.srcObject=a;n.onloadedmetadata=function(){self.kConsoleLog&&self.kConsoleLog("======play video========");n.play().then(function(){self.kConsoleLog&&
self.kConsoleLog("======played video========");var a=n.videoWidth+"x"+n.videoHeight;u&&(u.innerText=a);r&&(r.value="got");self.kConsoleLog&&self.kConsoleLog(a);e()},function(a){f(a)})};n.onerror=function(){f()}})}).then(function(){f()})["catch"](function(a){self.kConsoleLog&&self.kConsoleLog(a);m?e(a):(m=!0,k.video.width=void 0,k.video.height=void 0,w())})};w()})},F=function(){D(p.value).then(function(){K&&z()})["catch"](function(a){alert("Play video failed: "+(a.message||a))})};p&&p.addEventListener("change",
F);var I=function(){D().then(function(){K&&z()})["catch"](function(a){alert("Play video failed: "+(a.message||a))})};r&&r.addEventListener("change",I);a.grabVideo=function(g){var f=document.createElement("canvas");f.width=n.videoWidth;f.height=n.videoHeight;f.getContext("2d").drawImage(n,0,0);return g?a.addImage(f):f};var J=function(){if(a.beforeAddImgFromGrabVideoBtn){var g=a.grabVideo();N(a.beforeAddImgFromGrabVideoBtn,[g,function(f){a.addImage(f).then(function(e){N(a.afterAddImgFromGrabVideoBtn,
[!0,e])},function(e){N(a.afterAddImgFromGrabVideoBtn,[!1,e])})}])}else a.grabVideo(!0).then(function(f){N(a.afterAddImgFromGrabVideoBtn,[!0,f])},function(f){N(a.afterAddImgFromGrabVideoBtn,[!1,f])});a.hideVideo()};if(w)g(w).on("click",J);var K=!1,L=function(){z();K=!0;u.removeAttribute("data-width");var h=a.videoHtmlElement.parentNode;h&&h.removeChild(a.videoHtmlElement);p&&p.removeEventListener("change",F);r&&r.removeEventListener("change",I);w&&g(w).off("click",J);y&&g(y).off("click",L);a.grabVideo=
null;a.hideVideo=null};a.hideVideo=L;if(y)g(y).on("click",L);document.body.appendChild(a.videoHtmlElement);return D().then(function(){if(K)return z(),Promise.reject("Video window has closed.");A()["catch"](function(a){self.kConsoleLog&&kConsoleLog(a)});g(a.videoHtmlElement).show();return Promise.resolve()})}}};KPainter.cvFolder=void 0==KPainter.cvFolder?"js":KPainter.cvFolder;KPainter.cvHasLoaded=!1;
KPainter._doCallbackNoBreak=function(h,a){if(h)try{h.apply(window,a||[])}catch(g){setTimeout(function(){throw g;},0)}};
KPainter.loadCvScript=function(){return new Promise(function(h,a){KPainter._loadCvQueue=KPainter._loadCvQueue||new TaskQueue;KPainter._loadCvQueue.push(function(){if(KPainter.cvHasLoaded)h(),KPainter._loadCvQueue.next();else{KPainter._CVModule={cvFolder:KPainter.cvFolder,preRun:[],postRun:[],isRuntimeInitialized:!1,onRuntimeInitialized:function(){KPainter.cvHasLoaded=!0;self.kConsoleLog&&kConsoleLog("Runtime is ready!");h();KPainter._loadCvQueue.next()},onExit:function(){a(Error("load wasm failed."));
KPainter._loadCvQueue.next()},onAbort:function(){a(Error("load wasm failed."));KPainter._loadCvQueue.next()},print:function(a){self.kConsoleLog&&kConsoleLog(a)},printErr:function(a){self.kConsoleLog&&kConsoleLog(a)},setStatus:function(a){self.kConsoleLog&&kConsoleLog(a)},totalDependencies:0};KPainter._CVModule.setStatus("Downloading...");var g=document.createElement("script"),w=KPainter.cvFolder;"/"!=w.charAt(w.length-1)&&(w+="/");g.src=window.WebAssembly?w+"cv-wasm.js?v=20180921":w+"cv.js?v=201800921";
g.onerror=function(){a(Error("load script failed."));KPainter._loadCvQueue.next()};document.body.appendChild(g)}})})};var MBC=KPainter;
